# ğŸ›£ï¸ è·¯ç”±è®°å½•åŠŸèƒ½ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## âœ… åŠŸèƒ½å·²å®ç°

ç³»ç»Ÿç°åœ¨**è‡ªåŠ¨è®°å½•æ¯ä¸ªå¥—åˆ©æœºä¼šçš„å®Œæ•´è·¯ç”±è·¯å¾„**ï¼

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1ï¸âƒ£ è¿è¡Œ Botï¼ˆè‡ªåŠ¨è®°å½•è·¯ç”±ï¼‰

```bash
pnpm run build  # âœ… å·²å®Œæˆ
pnpm run flashloan-dryrun
```

Bot ä¼šè‡ªåŠ¨å°†è·¯ç”±ä¿¡æ¯å­˜å…¥æ•°æ®åº“çš„ `opportunities.metadata` å­—æ®µã€‚

### 2ï¸âƒ£ åˆ†æè·¯ç”±æ•°æ®

```bash
# å¯åŠ¨ PostgreSQLï¼ˆå¦‚æœæœªå¯åŠ¨ï¼‰
# ç„¶åè¿è¡Œåˆ†æè„šæœ¬
pnpm tsx analyze-routes.ts
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ“Š æ‰¾åˆ° 2 æ¡åŒ…å«å…ƒæ•°æ®çš„æœºä¼šè®°å½•

1. [filtered] 2025-10-23 22:25:56
   åˆ©æ¶¦: 0.002375 SOL
   æ€»è·³æ•°: 2
   å»ç¨‹è·¯ç”±: Orca (SOL â†’ USDT)
   è¿”ç¨‹è·¯ç”±: Raydium (USDT â†’ SOL)
   ä½¿ç”¨çš„ DEX: Orca, Raydium

ğŸ“Š DEX ä½¿ç”¨ç»Ÿè®¡:
   Orca: 2 æ¬¡ (100.0%)
   Raydium: 2 æ¬¡ (100.0%)
```

---

## ğŸ“Š è®°å½•çš„ä¿¡æ¯

æ¯ä¸ªæœºä¼šè®°å½•åŒ…å«ï¼š

### âœ… è·¯ç”±ä¿¡æ¯
- å»ç¨‹è·¯å¾„ï¼ˆSOL â†’ æ¡¥æ¥ä»£å¸ï¼‰
- è¿”ç¨‹è·¯å¾„ï¼ˆæ¡¥æ¥ä»£å¸ â†’ SOLï¼‰
- æ¯ä¸€è·³ä½¿ç”¨çš„ DEX
- æ¯ä¸€è·³çš„è¾“å…¥/è¾“å‡ºé‡‘é¢
- æ€»è·³æ•°

### âœ… æ¡¥æ¥ä»£å¸ä¿¡æ¯
- ä»£å¸ç¬¦å·ï¼ˆUSDC/USDT/JUPç­‰ï¼‰
- ä»£å¸ Mint åœ°å€
- æ¡¥æ¥é‡‘é¢

### âœ… åˆ©æ¶¦åˆ†æ
- é¢„æœŸåˆ©æ¶¦ï¼ˆlamportsï¼‰
- ROIï¼ˆæŠ•èµ„å›æŠ¥ç‡ï¼‰
- è¾“å…¥/è¾“å‡ºé‡‘é¢
- æŸ¥è¯¢è€—æ—¶

---

## ğŸ¯ åº”ç”¨åœºæ™¯

### åˆ†æå“ªäº› DEX æœ€å¥½ç”¨
```bash
pnpm tsx analyze-routes.ts
# æŸ¥çœ‹ "DEX ä½¿ç”¨ç»Ÿè®¡" éƒ¨åˆ†
```

### åˆ†ææœ€ä½³è·¯ç”±è·³æ•°
```bash
pnpm tsx analyze-routes.ts
# æŸ¥çœ‹ "æŒ‰è·³æ•°çš„å¹³å‡åˆ©æ¶¦" éƒ¨åˆ†
```

### ä¼˜åŒ–æ¡¥æ¥ä»£å¸é€‰æ‹©
- è¿è¡Œ Bot ä¸€æ®µæ—¶é—´ï¼ˆå¦‚30åˆ†é’Ÿï¼‰
- è¿è¡Œåˆ†æè„šæœ¬
- æ ¹æ®åˆ©æ¶¦æ•°æ®è°ƒæ•´ `bridge-tokens.json`

---

## ğŸ“ æ•°æ®åº“æŸ¥è¯¢ç¤ºä¾‹

```sql
-- æŸ¥çœ‹æœ€æ–°çš„è·¯ç”±è®°å½•
SELECT 
  id,
  first_detected_at,
  first_profit / 1e9 as profit_sol,
  bridge_token,
  metadata->'routeInfo'->>'totalHops' as hops,
  metadata->'routeInfo'->>'dexes' as dexes
FROM opportunities
WHERE metadata IS NOT NULL
ORDER BY first_detected_at DESC
LIMIT 10;
```

---

## âš™ï¸ æ•°æ®ç»“æ„

è·¯ç”±ä¿¡æ¯å­˜å‚¨åœ¨ JSON æ ¼å¼çš„ `metadata` å­—æ®µï¼š

```json
{
  "routeInfo": {
    "totalHops": 2,
    "dexes": ["Orca", "Raydium"],
    "outboundRoute": [{
      "stepNumber": 1,
      "dex": "Orca",
      "inputMint": "So111...",
      "outputMint": "EPjFW..."
    }],
    "returnRoute": [...]
  },
  "bridgeInfo": {
    "symbol": "USDC",
    "mint": "EPjFWdd5Au...",
    "amount": "1894295485"
  },
  "profitAnalysis": {
    "expectedProfit": 2375322,
    "roi": 0.0002375
  }
}
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ç¡®è®¤è·¯ç”±æ­£åœ¨è®°å½•ï¼Ÿ

A: æŸ¥çœ‹ Bot æ—¥å¿—ï¼Œåº”è¯¥çœ‹åˆ°ï¼š
```
ğŸ“ Recorded opportunity #1 with route metadata
```

### Q: æ•°æ®åº“æ²¡æœ‰è·¯ç”±æ•°æ®ï¼Ÿ

A: æ£€æŸ¥ï¼š
1. PostgreSQL æ˜¯å¦è¿è¡Œ
2. `configs/flashloan-dryrun.toml` ä¸­ `database.enabled = true`
3. `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` æ˜¯å¦æ­£ç¡®

### Q: å¦‚ä½•æ¸…ç†æ—§æ•°æ®ï¼Ÿ

A: 
```sql
DELETE FROM opportunities
WHERE first_detected_at < NOW() - INTERVAL '30 days';
```

---

## ğŸ“š å®Œæ•´æ–‡æ¡£

è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒï¼š`è·¯ç”±è®°å½•åŠŸèƒ½è¯´æ˜.md`

---

**çŠ¶æ€**: âœ… å·²å®ç°ï¼Œå·²ç¼–è¯‘æˆåŠŸ  
**ä¸‹ä¸€æ­¥**: è¿è¡Œ Bot å¹¶è§‚å¯Ÿè·¯ç”±è®°å½•ï¼

