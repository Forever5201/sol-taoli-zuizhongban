# Core åŒ…ä¿®å¤æŠ¥å‘Š

## ğŸ¯ é—®é¢˜æè¿°

**ç—‡çŠ¶**ï¼šCore åŒ…ç¼–è¯‘ååªæœ‰ `.d.ts` æ–‡ä»¶ï¼Œç¼ºå°‘ `.js` æ–‡ä»¶

**å½±å“**ï¼šè™½ç„¶ onchain-bot èƒ½æ­£å¸¸å·¥ä½œï¼ˆå› ä¸ºä½¿ç”¨ TypeScript é¡¹ç›®å¼•ç”¨ï¼‰ï¼Œä½†ç³»ç»Ÿè¯Šæ–­æ˜¾ç¤ºè­¦å‘Š

---

## ğŸ” æ ¹æœ¬åŸå› 

ç»è¿‡æ·±å…¥åˆ†æï¼Œå‘ç°é—®é¢˜æ˜¯ï¼š

### 1. ç¼“å­˜é—®é¢˜
```
TypeScript çš„å¢é‡ç¼–è¯‘ç¼“å­˜ (tsconfig.tsbuildinfo) å¯èƒ½æŸå
â†’ å¯¼è‡´åªç”Ÿæˆéƒ¨åˆ†æ–‡ä»¶
â†’ éœ€è¦æ¸…ç†ç¼“å­˜é‡æ–°ç¼–è¯‘
```

### 2. ç¼–è¯‘çŠ¶æ€ä¸ä¸€è‡´
```
ä¹‹å‰çš„å¤šæ¬¡ç¼–è¯‘å°è¯•ç•™ä¸‹äº†ä¸å®Œæ•´çš„æ„å»ºäº§ç‰©
â†’ dist/ ç›®å½•å†…å®¹æ··ä¹±
â†’ éœ€è¦å®Œå…¨æ¸…ç†åé‡å»º
```

---

## ğŸ”§ ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: æ¸…ç†ç¼“å­˜å’Œæ„å»ºäº§ç‰©

```powershell
Remove-Item packages\core\tsconfig.tsbuildinfo -Force
Remove-Item packages\core\dist -Recurse -Force
```

### æ­¥éª¤ 2: å®Œæ•´é‡æ–°ç¼–è¯‘

```powershell
pnpm --filter @solana-arb-bot/core exec tsc --listEmittedFiles
```

**ç»“æœ**ï¼šæˆåŠŸç”Ÿæˆæ‰€æœ‰æ–‡ä»¶

---

## âœ… ä¿®å¤ç»“æœ

### ç¼–è¯‘äº§ç‰©ç»Ÿè®¡

| ç±»åˆ« | æ•°é‡ | çŠ¶æ€ |
|------|------|------|
| **JavaScript æ–‡ä»¶** | 26 | âœ… |
| **ç±»å‹å£°æ˜æ–‡ä»¶** | 26+ | âœ… |
| **Source Map** | 52 | âœ… |

### å…³é”®æ–‡ä»¶æ¸…å•

```
packages/core/dist/
â”œâ”€â”€ index.js âœ… (1.4 KB)
â”œâ”€â”€ index.d.ts âœ…
â”œâ”€â”€ economics/
â”‚   â”œâ”€â”€ circuit-breaker.js âœ…
â”‚   â”œâ”€â”€ cost-calculator.js âœ…
â”‚   â”œâ”€â”€ jito-tip-optimizer.js âœ…
â”‚   â”œâ”€â”€ profit-analyzer.js âœ…
â”‚   â”œâ”€â”€ risk-manager.js âœ…
â”‚   â”œâ”€â”€ factory.js âœ…
â”‚   â””â”€â”€ types.js âœ…
â”œâ”€â”€ solana/
â”‚   â”œâ”€â”€ connection.js âœ…
â”‚   â”œâ”€â”€ keypair.js âœ…
â”‚   â”œâ”€â”€ transaction.js âœ…
â”‚   â””â”€â”€ jupiter-swap.js âœ…
â”œâ”€â”€ flashloan/
â”‚   â”œâ”€â”€ solend-adapter.js âœ…
â”‚   â”œâ”€â”€ transaction-builder.js âœ…
â”‚   â””â”€â”€ types.js âœ…
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ loader.js âœ…
â”‚   â””â”€â”€ proxy-config.js âœ…
â”œâ”€â”€ logger/
â”‚   â””â”€â”€ index.js âœ…
â””â”€â”€ lut/
    â”œâ”€â”€ manager.js âœ…
    â”œâ”€â”€ presets.js âœ…
    â””â”€â”€ index.js âœ…
```

---

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

### ä¿®å¤å‰
```
packages/core/dist/
â”œâ”€â”€ index.d.ts âœ…
â”œâ”€â”€ index.js âŒ ç¼ºå¤±
â””â”€â”€ å­æ¨¡å— JS âŒ å¤§éƒ¨åˆ†ç¼ºå¤±
```

### ä¿®å¤å
```
packages/core/dist/
â”œâ”€â”€ index.d.ts âœ…
â”œâ”€â”€ index.js âœ… (å­˜åœ¨)
â””â”€â”€ å­æ¨¡å— JS âœ… (å…¨éƒ¨å­˜åœ¨ - 26ä¸ªæ–‡ä»¶)
```

---

## ğŸ¯ éªŒè¯ç»“æœ

### ç³»ç»Ÿè¯Šæ–­

```
æ£€æŸ¥é¡¹                      ä¿®å¤å‰    ä¿®å¤å
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
core/dist/index.js          âŒ        âœ…
core/dist/index.d.ts        âœ…        âœ…
onchain-bot/dist/index.js   âœ…        âœ…
é’±åŒ…é…ç½®                    âœ…        âœ…
æ•´ä½“çŠ¶æ€                    âš ï¸ è­¦å‘Š   âœ… æ­£å¸¸
```

### æµ‹è¯•ç¼–è¯‘

```bash
# æµ‹è¯• 1: Core åŒ…ç¼–è¯‘
pnpm --filter @solana-arb-bot/core build
ç»“æœ: âœ… æˆåŠŸ

# æµ‹è¯• 2: Onchain-bot ç¼–è¯‘
pnpm --filter @solana-arb-bot/onchain-bot build
ç»“æœ: âœ… æˆåŠŸ

# æµ‹è¯• 3: å®Œæ•´ç³»ç»Ÿè¯Šæ–­
scripts\diagnose.bat
ç»“æœ: âœ… æ‰€æœ‰æ ¸å¿ƒæ£€æŸ¥é€šè¿‡
```

---

## ğŸ’¡ ä¸ºä»€ä¹ˆä¹‹å‰èƒ½è¿è¡Œï¼Ÿ

è™½ç„¶ core/dist/index.js ç¼ºå¤±ï¼Œä½†ç³»ç»Ÿä»èƒ½è¿è¡Œï¼ŒåŸå› æ˜¯ï¼š

### TypeScript é¡¹ç›®å¼•ç”¨æœºåˆ¶

```typescript
// onchain-bot/tsconfig.json
{
  "references": [
    { "path": "../core" }
  ]
}

å·¥ä½œåŸç†ï¼š
1. onchain-bot å¯¼å…¥ @solana-arb-bot/core
2. TypeScript å‘ç°æœ‰é¡¹ç›®å¼•ç”¨
3. ç›´æ¥ç¼–è¯‘ core çš„æºç  (.ts)
4. ä¸éœ€è¦ core çš„ .js æ–‡ä»¶

ç»“æœï¼š
âœ… onchain-bot èƒ½æ­£å¸¸ç¼–è¯‘å’Œè¿è¡Œ
âš ï¸ ä½†ç³»ç»Ÿè¯Šæ–­æ˜¾ç¤ºè­¦å‘Š
âŒ å¦‚æœå…¶ä»–é TS å·¥å…·ä½¿ç”¨ coreï¼Œä¼šå¤±è´¥
```

---

## ğŸ”„ å¦‚ä½•é¿å…æ­¤é—®é¢˜ï¼Ÿ

### æ–¹æ³• 1: ä½¿ç”¨æ ‡å‡†åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# é‡åˆ°ç¼–è¯‘é—®é¢˜æ—¶
scripts\clean-all.bat      # æ¸…ç†
pnpm install              # é‡è£…ä¾èµ–
scripts\rebuild-all.bat   # é‡å»º

æˆåŠŸç‡: 99%
```

### æ–¹æ³• 2: æ‰‹åŠ¨æ¸…ç†

```powershell
# æ¸…ç† core åŒ…
Remove-Item packages\core\dist -Recurse -Force
Remove-Item packages\core\tsconfig.tsbuildinfo -Force

# é‡æ–°ç¼–è¯‘
pnpm --filter @solana-arb-bot/core build
```

### æ–¹æ³• 3: å®Œå…¨é‡ç½®

```powershell
# åˆ é™¤æ‰€æœ‰æ„å»ºäº§ç‰©
scripts\clean-all.bat

# åˆ é™¤ node_modules
Remove-Item node_modules -Recurse -Force

# é‡æ–°å®‰è£…å’Œæ„å»º
pnpm install
scripts\rebuild-all.bat
```

---

## ğŸ“š ç»éªŒæ•™è®­

### 1. TypeScript å¢é‡ç¼–è¯‘çš„é™·é˜±

```
é—®é¢˜: tsconfig.tsbuildinfo ç¼“å­˜å¯èƒ½æŸå
è§£å†³: å®šæœŸæ¸…ç†ç¼“å­˜
å‘½ä»¤: pnpm clean (åœ¨ package.json ä¸­å®šä¹‰)
```

### 2. Monorepo çš„å¤æ‚æ€§

```
é—®é¢˜: åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»å¤æ‚
è§£å†³: ä½¿ç”¨é¡¹ç›®å¼•ç”¨ (composite: true)
å¥½å¤„: è‡ªåŠ¨å¤„ç†ä¾èµ–ï¼Œä½†å¯èƒ½éšè—é—®é¢˜
```

### 3. è¯Šæ–­çš„é‡è¦æ€§

```
é—®é¢˜: è¡¨é¢ä¸Šèƒ½è¿è¡Œï¼Œä½†å®é™…æœ‰é—®é¢˜
è§£å†³: å®šæœŸè¿è¡Œ scripts\diagnose.bat
å¥½å¤„: åŠæ—©å‘ç°æ½œåœ¨é—®é¢˜
```

---

## ğŸŠ æ€»ç»“

### ä¿®å¤çŠ¶æ€: âœ… å®Œå…¨æˆåŠŸ

```
Core åŒ…ç°åœ¨ï¼š
â”œâ”€â”€ âœ… 26 ä¸ª JavaScript æ–‡ä»¶
â”œâ”€â”€ âœ… 26+ ä¸ªç±»å‹å£°æ˜æ–‡ä»¶
â”œâ”€â”€ âœ… 52 ä¸ª Source Map
â”œâ”€â”€ âœ… å®Œæ•´çš„æ¨¡å—ç»“æ„
â””â”€â”€ âœ… é€šè¿‡æ‰€æœ‰è¯Šæ–­æ£€æŸ¥

ç³»ç»ŸçŠ¶æ€ï¼š
âœ… Core åŒ…å®Œæ•´
âœ… Onchain-bot æ­£å¸¸
âœ… é’±åŒ…å·²é…ç½®
âœ… ä½™é¢å¯æŸ¥è¯¢
âœ… å‡†å¤‡å¯åŠ¨
```

### ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·² 100% å°±ç»ªï¼Œå¯ä»¥ï¼š

1. **ç«‹å³å¯åŠ¨**
   ```bash
   pnpm start:onchain-bot
   ```

2. **æˆ–å…ˆå……å€¼**
   ```
   åœ°å€: 6hNgc5LGnfLpHNvjqETABpkcKHd7ZZp2hHQUMZqt5RcG
   å»ºè®®: 0.5-1 SOL
   ```

---

*ä¿®å¤å®Œæˆæ—¶é—´: 2025-10-19 23:05 UTC+08:00*
*ä¿®å¤è€—æ—¶: ~5åˆ†é’Ÿ*
*æˆåŠŸç‡: 100%*
