# 🔧 机器人配置步骤（10分钟完成）

## 📝 步骤1：修改配置文件（5分钟）

### 打开配置文件

```bash
notepad my-bot-config.toml
```

### 必须修改的5个配置项

#### ① 接受服务条款（第12行）

**原始：**
```toml
acknowledge_terms_of_service = false  # 必须设为 true 才能运行
```

**修改为：**
```toml
acknowledge_terms_of_service = true  # ✅ 已阅读并接受
```

---

#### ② 钱包路径（第25行）

**原始：**
```toml
keypair_path = "${DEFAULT_KEYPAIR_PATH}"
```

**修改为：**
```toml
keypair_path = "./keypairs/test-wallet.json"  # ✅ 测试钱包路径
```

---

#### ③ 启用干运行测试（第31行）

**原始：**
```toml
dry_run = false
```

**修改为：**
```toml
dry_run = true  # ✅ 先干运行测试，不实际发送交易
```

---

#### ④ 使用Devnet测试（第52-53行）

找到 `[execution]` 部分，修改：

**原始：**
```toml
jito_block_engine_url = "https://mainnet.block-engine.jito.wtf"
```

**修改为：**
```toml
jito_block_engine_url = "https://amsterdam.devnet.block-engine.jito.wtf"  # ✅ Devnet测试
```

---

#### ⑤ 使用小资金策略（第82行）

找到 `[economics]` 部分，修改：

**原始：**
```toml
capital_size = "medium"
```

**修改为：**
```toml
capital_size = "small"  # ✅ 测试阶段用小资金策略
```

---

### 完整的测试配置示例

将 `my-bot-config.toml` 修改为：

```toml
[launcher]
task = "onchain-bot"
acknowledge_terms_of_service = true  # ✅ 改为 true

[bot]
rpc_endpoints = [
  "https://api.devnet.solana.com",  # ✅ Devnet RPC
]
keypair_path = "./keypairs/test-wallet.json"  # ✅ 钱包路径
scan_interval_ms = 1000  # ✅ 测试时1秒扫描一次
dry_run = true  # ✅ 干运行模式

[arbitrage]
min_spread_percent = 0.5
trade_amount = 100_000_000  # 0.1 SOL
max_slippage = 0.01

[execution]
mode = "jito"
jito_block_engine_url = "https://amsterdam.devnet.block-engine.jito.wtf"  # ✅ Devnet
check_jito_leader = false  # ✅ 测试时关闭
min_tip_lamports = 10_000
max_tip_lamports = 50_000_000
confirmation_timeout_ms = 30_000
max_retries = 3

[economics]
min_profit_lamports = 30_000  # 0.00003 SOL
compute_units = 300_000
compute_unit_price = 50_000
use_flash_loan = false
rpc_cost_per_tx = 100
capital_size = "small"  # ✅ 小资金策略

[economics.jito_tip]
percentile = 50  # ✅ 保守策略
profit_ratio = 0.30
default_competition = 0.5
default_urgency = 0.7

[risk]
max_priority_fee = 100_000
max_jito_tip = 50_000_000
max_slippage = 0.02
min_liquidity = 1_000_000_000
min_roi = 0.30

[circuit_breaker]
max_consecutive_failures = 5
max_hourly_loss = 500_000
min_success_rate = 0.40
cooldown_seconds = 300

[logging]
level = "info"
file_path = "logs/onchain-bot-jito.log"
console_output = true

[monitoring]
metrics_interval_seconds = 60
```

---

## 💼 步骤2：创建测试钱包（2分钟）

### 检查是否已安装Solana CLI

```bash
solana --version
```

如果没有安装，访问：https://docs.solana.com/cli/install-solana-cli-tools

### 创建测试钱包

```bash
# 创建 keypairs 目录
mkdir keypairs

# 生成新钱包
solana-keygen new -o ./keypairs/test-wallet.json

# 会提示设置密码（可选，测试时可以跳过）
# 记住显示的公钥地址！
```

### 获取Devnet测试币

```bash
# 获取5个SOL测试币
solana airdrop 5 ./keypairs/test-wallet.json --url devnet

# 如果失败，再试一次：
solana airdrop 2 ./keypairs/test-wallet.json --url devnet

# 查看余额
solana balance ./keypairs/test-wallet.json --url devnet
```

**预期输出：**
```
5 SOL
```

---

## 🧪 步骤3：运行测试（3分钟）

### 第一次运行（干运行模式）

```bash
npm run start:onchain-bot -- --config my-bot-config.toml
```

### 预期看到的输出

```
========================================
🎯 ========== On-Chain Arbitrage Bot ==========
Version: 1.0.0 MVP
Config: my-bot-config.toml

Initializing On-Chain Bot...
Bot name: On-Chain Bot
Network: devnet
Execution mode: JITO  ✅
Dry run: true  ✅

Initializing components...
Initializing RPC pool with 1 endpoints...
Loading keypair from ./keypairs/test-wallet.json...
Wallet: [你的钱包地址]
Balance: 5.000000 SOL  ✅
Loading markets from markets.toml...
Loaded 5 markets
Initializing Jito executor...
✅ Jito executor initialized
Initializing economics system...
✅ All components initialized successfully

🚀 Starting On-Chain Bot...
Monitoring started (interval: 60000ms)

扫描市场中...
📊 Found 2 arbitrage opportunities
💰 SOL-USDC: Gross=0.000120 SOL, Net=0.000105 SOL, ROI=350.0%, Tip=0.000015 SOL
✅ Opportunity passed all checks: SOL-USDC
🧪 DRY RUN - Transaction not sent  ✅

========== 性能指标 ==========
扫描次数: 10
发现机会: 2
执行次数: 0 (dry run)

执行模式: JITO
净利润: 0.000000 SOL
健康分数: 100/100
=============================
```

### 如果看到上面的输出

**🎉 恭喜！配置成功！**

---

## ✅ 配置检查清单

在运行前，确保：

- [x] `acknowledge_terms_of_service = true`
- [x] 钱包文件存在：`./keypairs/test-wallet.json`
- [x] 钱包有余额：至少 2 SOL (Devnet)
- [x] `dry_run = true` （首次测试）
- [x] 使用Devnet URL
- [x] `capital_size = "small"`

---

## 🚀 下一步：真实测试

如果干运行成功，可以尝试真实测试：

### 1. 修改配置

```toml
dry_run = false  # ✅ 改为 false
```

### 2. 重新运行

```bash
npm run start:onchain-bot -- --config my-bot-config.toml
```

### 3. 观察输出

现在会看到真实的交易：

```
🚀 Executing via Jito (Tip: 0.000015 SOL)
Bundle sent successfully | ID: abc123...
✅ Bundle landed successfully! 
Signature: xyz456...
Net Profit: 105000 lamports  ✅
```

---

## ⚠️ 重要提示

### 安全警告

1. **仅用于测试**
   - 这是Devnet配置
   - 使用测试币，无真实价值
   - 可以放心测试

2. **Mainnet注意事项**
   - 使用前充分测试
   - 从小额开始（1-2 SOL）
   - 使用专用热钱包
   - 定期转出利润

### 如果遇到错误

**错误1：找不到钱包文件**
```
Error: Keypair file not found
```
**解决：**
```bash
# 检查文件是否存在
dir keypairs\test-wallet.json

# 重新创建
solana-keygen new -o ./keypairs/test-wallet.json
```

**错误2：余额不足**
```
Error: Insufficient balance
```
**解决：**
```bash
# 再次空投
solana airdrop 5 ./keypairs/test-wallet.json --url devnet
```

**错误3：RPC连接失败**
```
Error: Failed to connect to RPC
```
**解决：**
```toml
# 使用官方Devnet RPC
rpc_endpoints = [
  "https://api.devnet.solana.com",
]
```

---

## 📊 监控数据说明

运行后每60秒会显示性能指标：

```
========== 性能指标 ==========
扫描次数: 100           # 已扫描100次市场
发现机会: 12            # 发现12个套利机会
执行次数: 8             # 实际执行8次

成功率: 75.0%           # 成功率（目标>70%）
连续失败: 0             # 连续失败次数
净利润: 0.000850 SOL    # 累计净利润

执行模式: JITO
Bundle成功率: 75.0%     # Jito成功率
总小费支出: 0.000120 SOL
平均小费: 0.000015 SOL

健康分数: 85/100        # 系统健康分数
缓存命中: 92.5%         # 缓存效率
=============================
```

---

## 🎯 配置优化建议

### 测试成功后，逐步优化

#### 提高扫描频率

```toml
scan_interval_ms = 100  # 从1000ms降到100ms
```

#### 降低利润门槛

```toml
min_profit_lamports = 20_000  # 从30000降到20000
```

#### 升级到中资金策略

```toml
capital_size = "medium"
[economics.jito_tip]
percentile = 75  # 从50th升到75th
```

---

## 📞 需要帮助？

### 查看文档
- `CONFIGURE_GUIDE.md` - 详细配置指南
- `JITO_INTEGRATION.md` - Jito使用手册
- `README.md` - 项目总览

### 快速命令
```bash
# 检查环境
node quick-check.js

# 查看配置文件
notepad my-bot-config.toml

# 运行测试
npm run start:onchain-bot -- --config my-bot-config.toml
```

---

## ✨ 总结

**配置3步走：**

1. ✅ 修改5个配置项（5分钟）
2. ✅ 创建测试钱包（2分钟）
3. ✅ 运行测试（3分钟）

**配置好后：**
- Devnet充分测试
- 观察性能数据
- 调优参数
- 准备Mainnet

---

**🚀 准备好了？开始配置！**

```bash
# 步骤1：编辑配置
notepad my-bot-config.toml

# 步骤2：创建钱包
mkdir keypairs
solana-keygen new -o ./keypairs/test-wallet.json
solana airdrop 5 ./keypairs/test-wallet.json --url devnet

# 步骤3：运行测试
npm run start:onchain-bot -- --config my-bot-config.toml
```
