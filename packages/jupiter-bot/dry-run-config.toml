# Jupiter Bot 干运行配置 - 闪电贷 + Jito 模拟模式
# 配置时间: 2025-10-20
# 模式: DRY RUN (不发送真实交易)
# 钱包: 6hNgc5LGnfLpHNvjqETABpkcKHd7ZZp2hHQUMZqt5RcG

# ========================================
# Jupiter API配置
# ========================================
[jupiter]
# 使用公共Jupiter API（简单，有速率限制）
api_url = "https://quote-api.jup.ag/v6"

# 代币列表文件路径
mints_file = "./mints.txt"

# ========================================
# 交易参数（配合闪电贷）
# ========================================
[trading]
# 每笔交易金额（SOL）
# 注意：闪电贷模式下，实际交易金额可以放大
trade_amount_sol = 0.01

# 最小利润阈值（SOL）
# 闪电贷费用 0.09%，所以需要至少 0.1% 的利润
min_profit_sol = 0.0001

# 滑点容差（基点，50 = 0.5%）
slippage_bps = 50

# Worker线程数量
# Windows: 建议 2-4
worker_count = 2

# 查询间隔（毫秒）
# 公共API: 建议 100-500
# 干运行模式可以稍快一些
query_interval_ms = 300

# ========================================
# 执行模式：Jito优先（模拟）
# ========================================
[execution]
mode = "jito"

# 🔴 干运行模式：只模拟，不发送真实交易
dry_run = true

# ========================================
# Jito配置（模拟模式）
# ========================================
[jito]
# Jito Block Engine地址
block_engine_url = "https://mainnet.block-engine.jito.wtf"

# 使用相同的钱包（仅用于地址，不会实际签名）
auth_keypair_path = "../../keypairs/flashloan-wallet.json"

# 小费金额（lamports）- 模拟
# 0.00001 SOL = 10000 lamports（起步价）
# 0.00005 SOL = 50000 lamports（中等竞争）
tip_lamports = 10000

# 确认超时（秒）
confirmation_timeout = 30

# ========================================
# 钱包配置
# ========================================
[wallet]
# 交易密钥路径（仅读取地址，不会实际签名）
keypair_path = "../../keypairs/flashloan-wallet.json"

# ========================================
# 闪电贷配置（模拟）
# ========================================
[flashloan]
# 启用闪电贷（模拟模式）
enabled = true

# 闪电贷协议
protocol = "solend"

# 最大闪电贷金额（lamports）
# 100 SOL = 100000000000 lamports
max_flashloan_amount = 100000000000

# 最小净利润（扣除闪电贷费用后）
min_profit_after_fees = 500000

# 闪电贷费率（Solend: 0.09%）
fee_rate = 0.0009

# ========================================
# 安全设置
# ========================================
[security]
# 风险确认（设为true才能运行）
acknowledge_terms_of_service = true

# 熔断器配置（干运行模式下也会模拟）
circuit_breaker_enabled = true

# 连续失败阈值
circuit_breaker_max_failures = 5

# 每小时最大亏损（SOL）
circuit_breaker_loss_threshold = -0.05

# ========================================
# 监控与告警
# ========================================
[monitoring]
# 统计报告间隔（秒）
stats_interval_seconds = 60

# Discord Webhook（可选）
# webhook_url = "https://discord.com/api/webhooks/YOUR_WEBHOOK_HERE"

# ========================================
# 日志配置
# ========================================
[logging]
# 日志级别：debug, info, warn, error
# 干运行模式建议使用 info 或 debug
level = "info"

# 日志文件路径
file = "logs/jupiter-bot-dryrun.log"

# ========================================
# 高级配置
# ========================================
[advanced]
# 启用环形套利检测
circular_arbitrage = true

# 最大跳数（2 = 双跳，3 = 三角套利）
max_hops = 3

# 启用动态小费策略（模拟）
dynamic_tip = true

# 小费占利润的百分比（1-10%）
tip_profit_percentage = 5

# ========================================
# 干运行模式专用配置
# ========================================
[dry_run]
# 显示详细的模拟信息
verbose = true

# 模拟交易延迟（毫秒）
simulated_tx_delay_ms = 100

# 模拟成功率（0.0-1.0）
# 0.9 = 90% 模拟成功
simulated_success_rate = 0.9

# 记录所有发现的机会（即使不满足最小利润）
log_all_opportunities = true

