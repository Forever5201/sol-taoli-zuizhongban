# ========================================
# Solana 套利机器人 - 保守 Tip 策略
# ========================================
# 适用场景：
# - 小资金（0.1 - 1 SOL）
# - 风险厌恶型
# - 学习和测试阶段
# ========================================

[bot]
name = "onchain-bot-conservative"
network = "mainnet-beta"
dry_run = false

# ========================================
# RPC 配置
# ========================================
[rpc]
url = "${DEFAULT_RPC_URL}"
pool_size = 5

# ========================================
# 钱包配置
# ========================================
[keypair]
path = "${DEFAULT_KEYPAIR_PATH}"
min_balance_sol = 0.2

# ========================================
# 执行模式：Jito（保守策略）
# ========================================
[execution]
mode = "jito"
skip_preflight = true
max_retries = 2
confirmation_timeout = 30000

# Jito 配置
jito_block_engine_url = "https://mainnet.block-engine.jito.wtf"
check_jito_leader = true
max_acceptable_wait_slots = 5

min_tip_lamports = 5000         # 0.000005 SOL（更低）
max_tip_lamports = 10000000     # 0.01 SOL（更低上限）

# ========================================
# 🛡️ Tip 优化策略（保守模式 - 控制成本）
# ========================================
[execution.tip_strategy]
capital_size = "small"

# Tip 计算策略（保守）
profit_share_percentage = 0.25      # 利润的 25% 作为 tip
competition_multiplier = 2.0        # 较低的竞争倍数
urgency_multiplier = 1.5            # 较低的紧迫性倍数

# 历史学习
use_historical_learning = true
historical_weight = 0.3             # 较低的历史权重
target_success_rate = 0.65          # 目标成功率 65%

# ========================================
# 经济模型配置
# ========================================
[economics]
capital_size = "small"

[economics.cost]
signature_count = 2
compute_units = 300_000
compute_unit_price = 5_000          # 较低优先费
use_flash_loan = false

[economics.profit]
min_profit_lamports = 200_000       # 0.0002 SOL
min_roi = 30                         # 30% ROI
max_slippage = 0.03                  # 3%
min_liquidity_usd = 1000

[economics.risk]
max_consecutive_failures = 3         # 更保守
max_hourly_loss_lamports = 200_000
min_success_rate = 0.3
cooldown_period = 600_000            # 10 分钟

# ========================================
# 闪电贷配置（禁用）
# ========================================
[flashloan]
enabled = false

# ========================================
# Jupiter 集成
# ========================================
[jupiter]
enabled = true
api_url = "${JUPITER_API_URL:-http://127.0.0.1:8080}"

# ========================================
# 监控配置
# ========================================
[monitoring]
enabled = true
log_level = "info"

