# ========================================
# On-Chain Bot - Jupiter + é—ªç”µè´·å¢å¼ºé…ç½®
# ========================================
# 
# è¿™ä¸ªé…ç½®å¯ç”¨ï¼š
# âœ… Jupiter è·¯ç”±ï¼ˆæœ€ä¼˜ä»·æ ¼ï¼‰
# âœ… é—ªç”µè´·ï¼ˆæ— æœ¬é‡‘å¥—åˆ©ï¼‰
# âœ… Jito æ‰§è¡Œï¼ˆé«˜æˆåŠŸç‡ï¼‰

[bot]
name = "onchain-bot-flashloan"
network = "mainnet-beta"
dry_run = false

# ========================================
# RPC é…ç½®
# ========================================
[rpc]
urls = [
  "${DEFAULT_RPC_URL}",
  "https://api.mainnet-beta.solana.com"
]
commitment = "confirmed"
min_time = 10
max_concurrent = 50

# ========================================
# å¸‚åœºé…ç½®
# ========================================
[markets]
config_file = "./markets.toml"
scan_interval_ms = 100

# ========================================
# å¥—åˆ©é…ç½®
# ========================================
[arbitrage]
min_spread_percent = 0.5
min_liquidity = 5000
# äº¤æ˜“é‡‘é¢ï¼ˆé…åˆé—ªç”µè´·ä½¿ç”¨ï¼‰
trade_amount = 10_000_000_000  # 10 SOLï¼ˆå®é™…ä¼šé€šè¿‡é—ªç”µè´·æ”¾å¤§åˆ° 50-100 SOLï¼‰
max_slippage = 0.015  # 1.5%

# ========================================
# æ‰§è¡Œæ¨¡å¼ï¼šJitoï¼ˆæ¨èï¼‰
# ========================================
[execution]
mode = "jito"
skip_preflight = true
max_retries = 3
confirmation_timeout = 30000

# Jito é…ç½®
jito_block_engine_url = "https://mainnet.block-engine.jito.wtf"

# ğŸ”¥ å…³é”®ï¼šJito Leader æ£€æŸ¥ï¼ˆæˆåŠŸç‡æå‡4å€ï¼‰
check_jito_leader = true  # å¯ç”¨Leaderæ£€æŸ¥
max_acceptable_wait_slots = 5  # æœ€å¤šç­‰å¾…5ä¸ªslots

min_tip_lamports = 10000      # 0.00001 SOL
max_tip_lamports = 50000000   # 0.05 SOL

# ========================================
# ğŸš€ Tip ä¼˜åŒ–ç­–ç•¥ï¼ˆæ¿€è¿›æ¨¡å¼ - ä¼˜å…ˆæˆåŠŸç‡ï¼‰
# ========================================
[execution.tip_strategy]
capital_size = "medium"             # small/medium/large

# Tip è®¡ç®—ç­–ç•¥
profit_share_percentage = 0.35      # åˆ©æ¶¦çš„ 35% ä½œä¸º tipï¼ˆæ¿€è¿›ï¼‰
competition_multiplier = 2.5        # ç«äº‰å¼ºåº¦å€æ•°ï¼ˆæ›´é«˜ = æ›´æ¿€è¿›ï¼‰
urgency_multiplier = 1.8            # ç´§è¿«æ€§å€æ•°

# å†å²å­¦ä¹ ï¼ˆè‡ªé€‚åº”ä¼˜åŒ–ï¼‰
use_historical_learning = true      # å¯ç”¨å†å²å­¦ä¹ 
historical_weight = 0.4             # å†å²æ•°æ®æƒé‡ 40%
target_success_rate = 0.75          # ç›®æ ‡æˆåŠŸç‡ 75%

# ========================================
# ç»æµæ¨¡å‹é…ç½®
# ========================================
[economics]
capital_size = "small"  # smallï¼ˆä½¿ç”¨é—ªç”µè´·æ”¾å¤§ï¼‰

# æˆæœ¬é…ç½®ï¼ˆé—ªç”µè´·æ¨¡å¼ä¸‹ç­¾åæ•°å¢åŠ ï¼‰
signature_count = 4  # é—ªç”µè´·éœ€è¦æ›´å¤šç­¾å
compute_units = 400_000  # é—ªç”µè´·éœ€è¦æ›´å¤šè®¡ç®—
compute_unit_price = 10_000  # æé«˜ä¼˜å…ˆçº§

# åˆ©æ¶¦é—¨æ§›ï¼ˆæ‰£é™¤é—ªç”µè´·è´¹ç”¨ï¼‰
min_profit_lamports = 500_000  # 0.0005 SOLï¼ˆæ‰£é™¤ 0.09% è´¹ç”¨åï¼‰
min_roi = 50  # 50%ï¼ˆé—ªç”µè´·éœ€è¦æ›´é«˜ ROIï¼‰

# æˆæœ¬ä¸Šé™
max_priority_fee = 50_000
max_jito_tip = 50_000_000  # 0.05 SOL
max_slippage = 0.02  # 2%
min_liquidity_usd = 10000

# ç†”æ–­å™¨é…ç½®
max_consecutive_failures = 5
max_hourly_loss_lamports = 1_000_000  # 0.001 SOL
min_success_rate = 0.4
cooldown_period = 300_000  # 5åˆ†é’Ÿ

# ========================================
# é—ªç”µè´·é…ç½® âš¡
# ========================================
[flashloan]
# å¯ç”¨é—ªç”µè´·
enabled = true

# åè®®é€‰æ‹©
protocol = "solend"  # solend | mango | marginfi

# æœ€å¤§å€Ÿæ¬¾é‡‘é¢ï¼ˆlamportsï¼‰
max_borrow_amount = 100_000_000_000  # 100 SOL

# æœ€å°å‡€åˆ©æ¶¦ï¼ˆæ‰£é™¤é—ªç”µè´·è´¹ç”¨åï¼‰
min_net_profit = 500_000  # 0.0005 SOL

# é—ªç”µè´·è´¹ç‡
fee_rate = 0.0009  # 0.09%

# åŠ¨æ€å€Ÿæ¬¾ç­–ç•¥
auto_calculate_amount = true  # è‡ªåŠ¨è®¡ç®—æœ€ä¼˜å€Ÿæ¬¾é‡‘é¢

# ========================================
# Jupiter é…ç½® ğŸª
# ========================================
[jupiter]
# å¯ç”¨ Jupiter è·¯ç”±
enabled = true

# Jupiter API URL
api_url = "https://quote-api.jup.ag/v6"
# æˆ–ä½¿ç”¨æœ¬åœ° Jupiter Serverï¼ˆéœ€è¦å…ˆå¯åŠ¨ï¼‰
# api_url = "http://127.0.0.1:8080"

# æ»‘ç‚¹å®¹å·®ï¼ˆåŸºç‚¹ï¼‰
slippage_bps = 50  # 0.5%

# æ˜¯å¦åªä½¿ç”¨ç›´æ¥è·¯ç”±
only_direct_routes = false

# æœ€å¤§è·¯ç”±æ•°
max_routes = 3

# ========================================
# é’±åŒ…é…ç½®
# ========================================
[keypair]
path = "${DEFAULT_KEYPAIR_PATH}"
min_balance_sol = 0.2  # é—ªç”µè´·æ¨¡å¼éœ€è¦è¶³å¤Ÿ gas è´¹

# ========================================
# ç›‘æ§é…ç½®
# ========================================
[monitoring]
enabled = true
metrics_interval = 60
webhook_url = ""

# ========================================
# æ—¥å¿—é…ç½®
# ========================================
[logging]
level = "info"
file = "./logs/onchain-bot-flashloan.log"


