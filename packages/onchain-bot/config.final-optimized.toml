# ğŸš€ ä¼˜åŒ–é…ç½® - åŸºäºå®é™…æµ‹è¯•ç»“æœ
# 
# æµ‹è¯•æ—¶é—´: 2025-10-28
# å¯ç”¨ç«¯ç‚¹: 3 ä¸ª (HeliusÃ—2 + Alchemy)
# æ€»å®¹é‡: 70 RPS
# æ¯ç§’å¯æ‰§è¡Œ: çº¦ 35 æ¬¡å¸‚åœºæ‰«æ

[bot]
name = "onchain-bot-production"
network = "mainnet-beta"
dry_run = true  # âš ï¸ ç”Ÿäº§ç¯å¢ƒè¯·æ”¹ä¸º false

[rpc]
# ğŸ”¥ å·²éªŒè¯å¯ç”¨çš„ç«¯ç‚¹ï¼ˆæŒ‰æ€§èƒ½æ’åºï¼‰
urls = [
  # ğŸ¥‡ ä¸»åŠ›1: Helius è´¦å·1 (10 RPS, 1228ms) - æ€§èƒ½æœ€ä½³
  "https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  
  # ğŸ¥ˆ ä¸»åŠ›2: Helius è´¦å·2 (10 RPS, 1243ms) - æ€§èƒ½ä¼˜ç§€
  "https://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65",
  
  # ğŸ¥‰ ä¸»åŠ›3: Alchemy (50 RPS, 2131ms) - é«˜å®¹é‡
  "https://solana-mainnet.g.alchemy.com/v2/KdZvViY51ReRsivlLqSmx"
]

# âœ… æ‰€æœ‰ç«¯ç‚¹éƒ½æ”¯æŒ WebSocket è®¢é˜…
ws_endpoints = [
  "wss://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  "wss://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65",
  "wss://solana-mainnet.g.alchemy.com/v2/KdZvViY51ReRsivlLqSmx"
]

# æäº¤çº§åˆ«
commitment = "confirmed"

# ğŸ”¥ ä¼˜åŒ–çš„é€Ÿç‡é™åˆ¶ï¼ˆæ€»å®¹é‡ 70 RPSï¼‰
min_time = 30          # 30ms é—´éš” = æœ€å¤š 33 RPS
max_concurrent = 20    # 20 å¹¶å‘ï¼ˆè¿œä½äº 70 RPS ä¸Šé™ï¼‰

[markets]
config_file = "./markets.toml"

# ğŸ”¥ ä¼˜åŒ–çš„æ‰«æé—´éš”
# 70 RPS Ã· 2 (æ¯æ¬¡æ‰«æ2ä¸ªè¯·æ±‚) = 35 æ¬¡/ç§’
# å»ºè®®ä½¿ç”¨ 150ms = æ¯ç§’ 6.67 æ¬¡æ‰«æ = 13.3 RPSï¼ˆå®‰å…¨èŒƒå›´ï¼‰
scan_interval_ms = 150

[arbitrage]
# æ›´æ¿€è¿›çš„å¥—åˆ©å‚æ•°ï¼ˆå®¹é‡å……è¶³ï¼‰
min_spread_percent = 0.25    # 0.25% ä»·å·®å³å¯è§¦å‘
min_liquidity = 2000         # 2000 USD æœ€å°æµåŠ¨æ€§
trade_amount = 100_000_000   # 0.1 SOL

[execution]
executor = "spam"
skip_preflight = true
max_retries = 3
confirmation_timeout = 30000

[economics]
capital_size = "small"

# æˆæœ¬é…ç½®
signature_count = 2
compute_units = 200_000
compute_unit_price = 5_000

# åˆ©æ¶¦é—¨æ§›ï¼ˆæ›´æ¿€è¿›ï¼‰
min_profit_lamports = 30_000   # 0.00003 SOL
min_roi = 15                    # 15% ROI

# æˆæœ¬ä¸Šé™
max_priority_fee = 20_000
max_jito_tip = 0
max_slippage = 0.015
min_liquidity_usd = 2000

# ç†”æ–­å™¨é…ç½®
max_consecutive_failures = 5
max_hourly_loss_lamports = 1_000_000  # 0.001 SOL
min_success_rate = 0.15
cooldown_period = 120_000  # 2åˆ†é’Ÿ

[keypair]
path = "${DEFAULT_KEYPAIR_PATH}"
min_balance_sol = 0.1

[monitoring]
enabled = true
metrics_interval = 60
webhook_url = ""

[logging]
level = "info"
file = "./logs/onchain-bot-production.log"

# =========================================
# ğŸ“Š æ€§èƒ½æµ‹è¯•ç»“æœ
# =========================================
#
# âœ… Helius è´¦å·1:
#    - å»¶è¿Ÿ: 1228ms
#    - é€Ÿç‡: 10 RPS
#    - WebSocket: âœ… æ”¯æŒ
#    - çŠ¶æ€: æ­£å¸¸
#
# âœ… Helius è´¦å·2:
#    - å»¶è¿Ÿ: 1243ms
#    - é€Ÿç‡: 10 RPS
#    - WebSocket: âœ… æ”¯æŒ
#    - çŠ¶æ€: æ­£å¸¸
#
# âœ… Alchemy:
#    - å»¶è¿Ÿ: 2131ms
#    - é€Ÿç‡: 50 RPS (330 CU/s)
#    - WebSocket: âœ… æ”¯æŒ
#    - çŠ¶æ€: æ­£å¸¸
#
# âŒ Ankr:
#    - é”™è¯¯: 403 Forbidden
#    - åŸå› : API key æƒé™ä¸è¶³
#    - å»ºè®®: æš‚ä¸ä½¿ç”¨
#
# âŒ QuickNode:
#    - é”™è¯¯: 404 Not Found
#    - åŸå› : éœ€è¦å®Œæ•´ URL
#    - å»ºè®®: ä»æ§åˆ¶å°è·å–æ­£ç¡® URL
#
# æ€»å®¹é‡: 70 RPS
# å½“å‰ä½¿ç”¨: ~13.3 RPS (å®‰å…¨èŒƒå›´)
# ä½™é‡: çº¦ 80% (å¯è¿›ä¸€æ­¥ä¼˜åŒ–)
#
# =========================================
# ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®
# =========================================
#
# 1. å¦‚æœéœ€è¦æ›´é«˜é¢‘ç‡ï¼š
#    - å°† scan_interval_ms é™ä½åˆ° 100ms
#    - å°† min_time é™ä½åˆ° 20ms
#    - é¢„è®¡ä½¿ç”¨çº¦ 20 RPS
#
# 2. å¦‚æœæ·»åŠ æ›´å¤šå¸‚åœºï¼š
#    - å½“å‰é…ç½®æ”¯æŒæœ€å¤šçº¦ 15 ä¸ªå¸‚åœº
#    - æ¯å¢åŠ  1 ä¸ªå¸‚åœºå¢åŠ çº¦ 1 RPS
#
# 3. ä¼˜åŒ–å»¶è¿Ÿï¼š
#    - Helius å»¶è¿Ÿæœ€ä½ï¼Œä¼˜å…ˆä½¿ç”¨
#    - Alchemy ä½œä¸ºå¤‡ç”¨ï¼ˆå®¹é‡å¤§ï¼‰
#
# 4. æ·»åŠ æ›´å¤šç«¯ç‚¹ï¼š
#    - ä¿®å¤ QuickNode URL å¯å¢åŠ  50 RPS
#    - æ€»å®¹é‡å¯è¾¾ 120 RPS
#

