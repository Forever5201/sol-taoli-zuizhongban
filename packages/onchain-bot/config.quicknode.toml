# QuickNode + å¤šæä¾›å•†é«˜æ€§èƒ½é…ç½®
# ä¼˜åŒ–åçš„ RPC ç«¯ç‚¹ç»„åˆï¼Œæœ€å¤§åŒ–å¯ç”¨æ€§å’Œé€Ÿç‡é™åˆ¶

[bot]
name = "onchain-bot-quicknode"
network = "mainnet-beta"
dry_run = true  # å…ˆæµ‹è¯•æ¨¡å¼ï¼Œç¡®è®¤æ— è¯¯åæ”¹ä¸º false

[rpc]
# ğŸ”¥ ä¼˜åŒ–çš„ RPC ç«¯ç‚¹ç»„åˆ
# æ€»å®¹é‡ï¼šQuickNode(50 RPS) + Helius(20 RPS) + Alchemy(50 RPS) + å…¬å…±(30 RPS) â‰ˆ 150 RPS
urls = [
  # ä¸»åŠ›1: QuickNodeï¼ˆé«˜æ€§èƒ½ï¼Œä½å»¶è¿Ÿï¼‰
  # âš ï¸ éœ€è¦æ›¿æ¢ä¸ºæ‚¨çš„å®Œæ•´ç«¯ç‚¹ URL
  # æ ¼å¼å¯èƒ½æ˜¯ï¼šhttps://your-endpoint.solana-mainnet.quiknode.pro/QN_e8ae6d6aa11f486895510c87b2178516/
  # è¯·åœ¨ QuickNode æ§åˆ¶å°å¤åˆ¶å®Œæ•´ HTTP Provider URL
  "https://your-endpoint.solana-mainnet.quiknode.pro/QN_e8ae6d6aa11f486895510c87b2178516/",
  
  # ä¸»åŠ›2: Helius è´¦å·1ï¼ˆ10 RPSï¼‰
  "https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  
  # ä¸»åŠ›3: Helius è´¦å·2ï¼ˆ10 RPSï¼‰
  "https://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65",
  
  # å¤‡ç”¨1: Ankr å…¬å…±ç«¯ç‚¹ï¼ˆå…è´¹ï¼Œ30 RPSï¼‰
  "https://rpc.ankr.com/solana",
  
  # å¤‡ç”¨2: Solana å®˜æ–¹å…¬å…±ç«¯ç‚¹
  "https://api.mainnet-beta.solana.com"
]

# æäº¤çº§åˆ«ï¼šprocessed(æœ€å¿«) | confirmed(æ¨è) | finalized(æœ€å®‰å…¨)
commitment = "confirmed"

# ğŸ”¥ ä¼˜åŒ–åçš„é€Ÿç‡é™åˆ¶å‚æ•°
# å¤šä¸ªé«˜æ€§èƒ½ç«¯ç‚¹ + è´Ÿè½½å‡è¡¡ = å¯ä»¥æé«˜å¹¶å‘
min_time = 30          # é™ä½åˆ° 30msï¼ˆæœ‰å¤šä¸ªç«¯ç‚¹æ”¯æŒï¼‰
max_concurrent = 20    # æé«˜åˆ° 20ï¼ˆæ€»å®¹é‡å……è¶³ï¼‰

[markets]
config_file = "./markets.toml"
# ğŸ”¥ å¯ä»¥é™ä½æ‰«æé—´éš”ï¼ˆå› ä¸º RPC å®¹é‡å……è¶³ï¼‰
scan_interval_ms = 200  # ä» 300ms é™ä½åˆ° 200msï¼ˆæ¯ç§’ 5 æ¬¡æ‰«æï¼‰

[arbitrage]
min_spread_percent = 0.3    # é™ä½é˜ˆå€¼ï¼Œæ•è·æ›´å¤šæœºä¼š
min_liquidity = 3000        # é€‚åº¦é™ä½æµåŠ¨æ€§è¦æ±‚
trade_amount = 100_000_000  # 0.1 SOL

[execution]
executor = "spam"
skip_preflight = true
max_retries = 3
confirmation_timeout = 30000

[economics]
capital_size = "small"
signature_count = 2
compute_units = 200_000
compute_unit_price = 5_000

min_profit_lamports = 50_000   # 0.00005 SOLï¼ˆæ›´æ¿€è¿›ï¼‰
min_roi = 20                    # 20%ï¼ˆæ›´æ¿€è¿›ï¼‰

max_priority_fee = 20_000
max_jito_tip = 0
max_slippage = 0.015
min_liquidity_usd = 3000

# ç†”æ–­å™¨é…ç½®
max_consecutive_failures = 5
max_hourly_loss_lamports = 1_000_000  # 0.001 SOL
min_success_rate = 0.2
cooldown_period = 180_000  # 3åˆ†é’Ÿ

[keypair]
path = "${DEFAULT_KEYPAIR_PATH}"
min_balance_sol = 0.1

[monitoring]
enabled = true
metrics_interval = 60
webhook_url = ""

[logging]
level = "info"
file = "./logs/onchain-bot-quicknode.log"

# =========================================
# ğŸ“ é…ç½®è¯´æ˜
# =========================================
# 
# 1. **QuickNode ç«¯ç‚¹é…ç½®**ï¼š
#    - è¯·è®¿é—® https://www.quicknode.com/endpoints
#    - æ‰¾åˆ°æ‚¨çš„ Solana Mainnet ç«¯ç‚¹
#    - å¤åˆ¶ "HTTP Provider" å®Œæ•´ URL
#    - æ›¿æ¢ä¸Šé¢çš„ç¬¬ä¸€ä¸ª URL
#
# 2. **å¦‚ä½•è·å– QuickNode ç«¯ç‚¹ URL**ï¼š
#    Step 1: ç™»å½• QuickNode Dashboard
#    Step 2: ç‚¹å‡» "Endpoints" -> é€‰æ‹© Solana Mainnet
#    Step 3: å¤åˆ¶ "HTTP Provider" URLï¼ˆæ ¼å¼ç±»ä¼¼ï¼‰ï¼š
#            https://xxx-xxx-xxx.solana-mainnet.quiknode.pro/[ä½ çš„token]/
#
# 3. **éªŒè¯é…ç½®**ï¼š
#    è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
#    pnpm tsx packages/onchain-bot/test-quicknode-connection.ts
#
# 4. **æ€§èƒ½ä¼˜åŒ–**ï¼š
#    - ä½¿ç”¨å¤šä¸ª RPC æä¾›å•†å®ç°è´Ÿè½½å‡è¡¡
#    - QuickNode å¤„ç†é«˜é¢‘æŸ¥è¯¢ï¼ˆä½å»¶è¿Ÿï¼‰
#    - Helius å¤„ç† WebSocket è®¢é˜…
#    - å…¬å…±ç«¯ç‚¹ä½œä¸ºæœ€åå¤‡ä»½
#
# 5. **WebSocket æ”¯æŒ**ï¼ˆå¯é€‰ï¼‰ï¼š
#    QuickNode WebSocket: wss://your-endpoint.solana-mainnet.quiknode.pro/[token]/
#    Helius WebSocket:    wss://mainnet.helius-rpc.com/?api-key=xxx
#

