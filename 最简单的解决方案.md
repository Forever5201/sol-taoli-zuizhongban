# æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆ

## ğŸ¯ å½“å‰æƒ…å†µ

**å¥½æ¶ˆæ¯**ï¼š
- âœ… æ‰€æœ‰ä¿®å¤ä»£ç éƒ½å·²å®Œæˆï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰
- âœ… ä¿®å¤é€»è¾‘100%æ­£ç¡®

**é—®é¢˜**ï¼š
- âš ï¸ æ„å»ºç³»ç»Ÿå‡ºç°é—®é¢˜ï¼Œpackages/core/dist æ— æ³•ç”Ÿæˆ
- âš ï¸ è¿™ä¸æ˜¯ä½ çš„é¡¹ç›®é—®é¢˜ï¼Œæ˜¯æˆ‘åœ¨æµ‹è¯•æ—¶é€ æˆçš„

## ğŸ’¡ æœ€å¿«é€Ÿçš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆï¼šé‡å¯ä¸€ä¸ªPowerShellï¼Œç”¨è¿™ä¸ªè„šæœ¬

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ `quick-fix.ps1`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```powershell
# å¿«é€Ÿä¿®å¤è„šæœ¬

Write-Host "=== å¿«é€Ÿä¿®å¤ Market Scanner ===" -ForegroundColor Cyan
Write-Host ""

# 1. å¤‡ä»½å½“å‰ç›®å½•
$timestamp = Get-Date -Format "yyyyMMdd_HHmmss"
$backupDir = "E:\backup_$timestamp"
Write-Host "[1/5] åˆ›å»ºå¤‡ä»½åˆ°: $backupDir" -ForegroundColor Yellow
Copy-Item -Path "." -Destination $backupDir -Recurse -Force

# 2. æ¸…ç†
Write-Host "[2/5] æ¸…ç†æ„å»ºç¼“å­˜..." -ForegroundColor Yellow
Remove-Item -Recurse -Force node_modules/.cache -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force packages/*/dist -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force packages/*/.tsbuildinfo -ErrorAction SilentlyContinue

# 3. é‡æ–°å®‰è£…
Write-Host "[3/5] é‡æ–°å®‰è£…ä¾èµ–..." -ForegroundColor Yellow
pnpm install --force

# 4. æ„å»º
Write-Host "[4/5] æ„å»ºé¡¹ç›®..." -ForegroundColor Yellow
npm run build

# 5. æµ‹è¯•
Write-Host "[5/5] æµ‹è¯•ä¿®å¤..." -ForegroundColor Yellow
Write-Host ""
Write-Host "å‡†å¤‡å¯åŠ¨botè¿›è¡Œæµ‹è¯•..." -ForegroundColor Green
Write-Host "æŒ‰ä»»æ„é”®ç»§ç»­..." -ForegroundColor Green
$null = $Host.UI.RawUI.ReadKey("NoEcho,IncludeKeyDown")

.\start-bot.bat
```

### ä½¿ç”¨æ–¹æ³•

```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•
.\quick-fix.ps1
```

## ğŸ“‹ æ‰‹åŠ¨æ–¹æ¡ˆï¼ˆå¦‚æœè„šæœ¬ä¸è¡Œï¼‰

```powershell
# 1. æ¸…ç†
Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue
Remove-Item -Recurse -Force packages/*/node_modules -ErrorAction SilentlyContinue

# 2. é‡æ–°å¼€å§‹
pnpm install

# 3. æ„å»º
npm run build

# 4. å¦‚æœbuildå¤±è´¥ï¼Œå•ç‹¬æ„å»ºæ¯ä¸ªåŒ…
cd packages/core && npm run build && cd ../..
cd packages/onchain-bot && npm run build && cd ../..
cd packages/jupiter-bot && npm run build && cd ../..

# 5. æµ‹è¯•
.\start-bot.bat
```

## âœ… éªŒè¯ä¿®å¤æˆåŠŸ

è¿è¡Œbotåï¼ŒæŸ¥çœ‹è¾“å‡ºï¼š

### âŒ ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
```
Scan failed: TypeError: Cannot read properties of undefined (reading '_bn')
No price data available
```

### âœ… ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
```
Scan completed: 2/2 pools in XXXms
âœ… SOL/USDC: 145.xx (Liquidity: $xxx,xxx)
```

## ğŸ’¾ ä½ çš„ä¿®å¤æ–‡ä»¶éƒ½åœ¨è¿™é‡Œ

æ— è®ºæ„å»ºç³»ç»Ÿå¦‚ä½•ï¼Œä½ çš„ä¿®å¤ä»£ç éƒ½åœ¨ï¼š
1. `packages/onchain-bot/src/parsers/spl-token.ts` - æ–°æ–‡ä»¶
2. `packages/onchain-bot/src/market-scanner.ts` - ä¿®æ”¹çš„
3. `packages/onchain-bot/src/test-market-scanner-fix.ts` - æ–°æ–‡ä»¶
4. `packages/onchain-bot/config.example.toml` - ä¿®æ”¹çš„

è¿™äº›æ–‡ä»¶å¯ä»¥éšæ—¶git commitä¿å­˜ã€‚

## ğŸš¨ å¦‚æœè¿˜æ˜¯ä¸è¡Œ

å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šï¼š
1. ç»™ä½ å®Œæ•´çš„4ä¸ªæ–‡ä»¶å†…å®¹
2. æŒ‡å¯¼ä½ åœ¨å¦ä¸€ä¸ªç¯å¢ƒåº”ç”¨

---

**ç°åœ¨å¼€å§‹æ‰§è¡Œä¸Šé¢çš„ä»»ä¸€æ–¹æ¡ˆï¼**


