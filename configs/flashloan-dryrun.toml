# ===================================================================
# é—ªç”µè´· å¹²è¿è¡Œé…ç½® - æ¨¡æ‹Ÿæ¨¡å¼
# ===================================================================
# 
# æ¨¡å¼ï¼šDRY RUNï¼ˆä¸å‘é€çœŸå®žäº¤æ˜“ï¼‰
# åŠŸèƒ½ï¼šæ‰«æçœŸå®žå¥—åˆ©æœºä¼šï¼Œè®¡ç®—åˆ©æ¶¦ï¼Œä½†ä¸æ‰§è¡Œäº¤æ˜“
# é€‚åˆï¼šæµ‹è¯•ç­–ç•¥ã€å­¦ä¹ è§‚å¯Ÿã€éªŒè¯é…ç½®
#
# ===================================================================

[bot]
name = "flashloan-arbitrage-bot-dryrun"
network = "mainnet-beta"
dry_run = true  # ðŸ”´ å¹²è¿è¡Œæ¨¡å¼ï¼šåªæ¨¡æ‹Ÿï¼Œä¸å‘é€çœŸå®žäº¤æ˜“

# ===================================================================
# RPC é…ç½® - ä½¿ç”¨å…è´¹çš„å…¬å…± RPCï¼ˆå¹²è¿è¡Œæ¨¡å¼è¶³å¤Ÿï¼‰
# ===================================================================
[rpc]
urls = [
  "https://api.mainnet-beta.solana.com",
  "https://solana-api.projectserum.com",
]
commitment = "processed"
timeout = 30000  # 30ç§’

# ===================================================================
# é’±åŒ…é…ç½® - ä½¿ç”¨æ‚¨å·²é…ç½®çš„é—ªç”µè´·é’±åŒ…
# ===================================================================
[keypair]
path = "./keypairs/flashloan-wallet.json"
min_balance_sol = 0.001  # å¹²è¿è¡Œæ¨¡å¼ä¸éœ€è¦å¤ªå¤šä½™é¢

# ===================================================================
# ç»æµŽæ¨¡åž‹é…ç½®
# ===================================================================
[economics]
capital_size = "medium"

[economics.cost]
signature_count = 4  # é—ªç”µè´·éœ€è¦é¢å¤–ç­¾å
compute_units = 800_000  # å¤æ‚äº¤æ˜“éœ€è¦æ›´å¤šè®¡ç®—å•å…ƒ
compute_unit_price = 20_000  # ä¼˜å…ˆè´¹ï¼ˆmicrolamportsï¼‰
use_flash_loan = true
flash_loan_amount = 100_000_000_000  # é»˜è®¤å€Ÿæ¬¾ 100 SOL

[economics.profit]
# åˆ©æ¶¦å¿…é¡»è¦†ç›–æ‰€æœ‰è´¹ç”¨
min_profit_lamports = 5_000_000  # 0.005 SOL æœ€ä½Žåˆ©æ¶¦
min_roi = 200  # 200% ROIï¼ˆåŸºäºŽè´¹ç”¨ï¼Œä¸æ˜¯æœ¬é‡‘ï¼‰
max_slippage = 0.015  # 1.5% æœ€å¤§æ»‘ç‚¹
min_liquidity_usd = 100000  # åªé€‰æ‹©å¤§æ± å­ï¼ˆ$100k+æµåŠ¨æ€§ï¼‰

[economics.risk]
# é£Žé™©æŽ§åˆ¶ - é—ªç”µè´·å¤±è´¥æˆæœ¬é«˜ï¼Œéœ€è¦æ›´ä¿å®ˆ
max_consecutive_failures = 3  # è¿žç»­å¤±è´¥ 3 æ¬¡æš‚åœ
max_hourly_loss_lamports = 1_000_000  # æ¯å°æ—¶æœ€å¤šäºæŸ 0.001 SOL
min_success_rate = 0.6  # æˆåŠŸçŽ‡ä½ŽäºŽ 60% æš‚åœ
cooldown_period = 600_000  # è§¦å‘ç†”æ–­åŽå†·å´ 10 åˆ†é’Ÿ

[economics.jito]
# Jito å°è´¹é…ç½® - é—ªç”µè´·å¯ä»¥ç»™æ›´é«˜çš„ tip
min_tip_lamports = 100_000  # 0.0001 SOL
max_tip_lamports = 100_000_000  # 0.1 SOL
profit_share_percentage = 30  # åˆ©æ¶¦çš„ 30% ç”¨ä½œ tip
competition_multiplier = 2.0
urgency_multiplier = 1.5

# ===================================================================
# é—ªç”µè´·é…ç½® - Solend åè®®ï¼ˆæ¨¡æ‹Ÿï¼‰
# ===================================================================
[flashloan]
provider = "solend"

[flashloan.solend]
lending_market = "4UpD2fh7xH3VP9QQaXtsS1YY3bxzWhtfpks7FatyKvdY"
reserve_sol = "8PbodeaosQP19SjYFx855UMqWxH2HynZLdBXmsrbac36"
min_borrow_amount = 10_000_000_000  # æœ€å°å€Ÿæ¬¾ 10 SOL
max_borrow_amount = 1_000_000_000_000  # æœ€å¤§å€Ÿæ¬¾ 1000 SOL
fee_rate = 0.0009  # 0.09% è´¹çŽ‡

[flashloan.dynamic_sizing]
enabled = true
min_multiplier = 10  # å€Ÿæ¬¾è‡³å°‘æ˜¯é¢„æœŸåˆ©æ¶¦çš„ 10 å€
max_multiplier = 100
safety_margin = 1.5  # å®‰å…¨è¾¹é™…

# ===================================================================
# Jupiter Server é…ç½®
# ===================================================================
[jupiter_server]
rpc_url = "https://solana-api.projectserum.com"
port = 8080
enable_circular_arbitrage = true
max_routes = 3
only_direct_routes = false

# ===================================================================
# æœºä¼šå‘çŽ°å™¨é…ç½®
# ===================================================================
[opportunity_finder]
mints_file = "mints-simple.txt"  # ç®€åŒ–ä»£å¸åˆ—è¡¨
worker_count = 2  # å¹²è¿è¡Œæ¨¡å¼ç”¨ 2 ä¸ªçº¿ç¨‹å³å¯
query_interval_ms = 500  # å¹²è¿è¡Œæ¨¡å¼æ…¢ä¸€ç‚¹ï¼Œå‡å°‘ RPC åŽ‹åŠ›
min_profit_lamports = 5_000_000  # å¿…é¡»è¦†ç›–é—ªç”µè´·è´¹ç”¨
slippage_bps = 50  # 0.5% æ»‘ç‚¹

[opportunity_finder.flashloan_filter]
# é—ªç”µè´·ç‰¹æ®Šè¿‡æ»¤ - åªæ‰¾å¤§æœºä¼š
min_gross_profit_multiplier = 3  # æ¯›åˆ©æ¶¦å¿…é¡»æ˜¯è´¹ç”¨çš„ 3 å€
required_liquidity_multiplier = 2  # æµåŠ¨æ€§å¿…é¡»æ˜¯å€Ÿæ¬¾çš„ 2 å€

# ===================================================================
# æ‰§è¡Œå™¨é…ç½® - ä½¿ç”¨ Jito MEVï¼ˆæ¨¡æ‹Ÿï¼‰
# ===================================================================
[execution]
mode = "jito"  # é—ªç”µè´·å¿…é¡»ç”¨ Jito ç¡®ä¿åŽŸå­æ€§
max_concurrent_trades = 1  # ä¸å¹¶å‘æ‰§è¡Œ

[jito]
block_engine_url = "https://mainnet.block-engine.jito.wtf"
# æ³¨æ„ï¼šå¹²è¿è¡Œæ¨¡å¼ä¸‹ï¼ŒJito è¿žæŽ¥ä¼šè¢«åˆå§‹åŒ–ä½†ä¸ä¼šå®žé™…å‘é€äº¤æ˜“
auth_keypair_path = "./keypairs/flashloan-wallet.json"
check_jito_leader = true  # å¿…é¡»å¯ç”¨ï¼
min_tip_lamports = 100_000
max_tip_lamports = 100_000_000
tip_strategy = "balanced"
confirmation_timeout = 45000  # 45ç§’ï¼ˆé—ªç”µè´·äº¤æ˜“æ›´å¤æ‚ï¼‰

# ===================================================================
# ç›‘æŽ§é…ç½® - å¹²è¿è¡Œæ¨¡å¼ç¦ç”¨é€šçŸ¥
# ===================================================================
[monitoring]
enabled = false  # å¹²è¿è¡Œæ¨¡å¼ä¸å‘é€é€šçŸ¥

# ===================================================================
# æ—¥å¿—é…ç½® - è¯¦ç»†æ—¥å¿—
# ===================================================================
[logging]
level = "info"  # info çº§åˆ«ï¼ˆå¯æ”¹ä¸º debug æŸ¥çœ‹æ›´å¤šç»†èŠ‚ï¼‰
pretty_print = true
file_output = true
log_dir = "./logs"
log_file_name = "flashloan-dryrun.log"
console_output = true

[logging.flashloan]
log_borrow_details = true
log_swap_steps = true
log_repay_details = true

# ===================================================================
# å®‰å…¨é…ç½®
# ===================================================================
[security]
max_daily_trades = 1000  # å¹²è¿è¡Œæ¨¡å¼å¯ä»¥å¤šä¸€äº›
max_daily_loss_sol = 999  # å¹²è¿è¡Œä¸ä¼šçœŸå®žäºæŸ
max_single_trade_fee_sol = 999  # å¹²è¿è¡Œä¸é™åˆ¶

[security.flashloan_checks]
verify_repay_amount = true
verify_profit_after_fees = true
simulate_before_execute = true
emergency_stop_on_failed_repay = true

# ===================================================================
# äº¤æ˜“æž„å»ºé…ç½®
# ===================================================================
[transaction_builder]
use_versioned_transaction = true
use_lut = true

[transaction_builder.lut]
preload_common_accounts = true
include_dex_accounts = true
include_lending_accounts = true

# ===================================================================
# å¹²è¿è¡Œæ¨¡å¼è¯´æ˜Ž
# ===================================================================
#
# åœ¨å¹²è¿è¡Œæ¨¡å¼ä¸‹ï¼Œæœºå™¨äººä¼šï¼š
# âœ… å¯åŠ¨ Jupiter Serverï¼ˆæœ¬åœ° APIï¼‰
# âœ… æ‰«æçœŸå®žçš„å¥—åˆ©æœºä¼š
# âœ… è®¡ç®—é—ªç”µè´·é‡‘é¢å’Œé¢„æœŸåˆ©æ¶¦
# âœ… æ˜¾ç¤ºè¯¦ç»†çš„äº¤æ˜“è·¯å¾„å’Œè´¹ç”¨
# âœ… è®°å½•æ‰€æœ‰æ—¥å¿—åˆ°æ–‡ä»¶
# âŒ ä½†ä¸ä¼šå‘é€çœŸå®žäº¤æ˜“
# âŒ ä¸ä¼šæ¶ˆè€— SOLï¼ˆé™¤äº†å°‘é‡ RPC æŸ¥è¯¢ï¼‰
#
# ä½ ä¼šçœ‹åˆ°çš„è¾“å‡ºï¼š
# - [DRY RUN] Would borrow 100 SOL from Solend
# - [DRY RUN] Would swap SOL -> USDC -> BTC -> SOL
# - [DRY RUN] Expected profit: 0.015 SOL
# - [DRY RUN] Would send bundle to Jito with 0.001 SOL tip
#
# ===================================================================

