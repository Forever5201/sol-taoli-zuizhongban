# ===================================================================
# é—ªç”µè´· å¹²è¿è¡Œé…ç½® - æ¨¡æ‹Ÿæ¨¡å¼
# ===================================================================
# 
# æ¨¡å¼ï¼šDRY RUNï¼ˆä¸å‘é€çœŸå®žäº¤æ˜“ï¼‰
# åŠŸèƒ½ï¼šæ‰«æçœŸå®žå¥—åˆ©æœºä¼šï¼Œè®¡ç®—åˆ©æ¶¦ï¼Œä½†ä¸æ‰§è¡Œäº¤æ˜“
# é€‚åˆï¼šæµ‹è¯•ç­–ç•¥ã€å­¦ä¹ è§‚å¯Ÿã€éªŒè¯é…ç½®
#
# ===================================================================

[bot]
name = "flashloan-arbitrage-bot-dryrun"
network = "mainnet-beta"
dry_run = true  # ðŸ”´ å¹²è¿è¡Œæ¨¡å¼ï¼šåªæ¨¡æ‹Ÿï¼Œä¸å‘é€çœŸå®žäº¤æ˜“

# ===================================================================
# RPC é…ç½® - ä½¿ç”¨ Helius RPCï¼ˆå…è´¹tierï¼Œæ”¯æŒ getRecentPrioritizationFeesï¼‰
# ===================================================================
[rpc]
# Heliuså…è´¹RPC - æ”¯æŒä¼˜å…ˆè´¹æŸ¥è¯¢ã€25 RPSé™åˆ¶ã€å›½å†…è®¿é—®è¾ƒå¿«
# æ³¨å†Œåœ°å€: https://helius.dev
helius_api_key = "d261c4a1-fffe-4263-b0ac-a667c05b5683"
urls = [
  "https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  "https://api.mainnet-beta.solana.com",  # å¤‡ç”¨ï¼ˆä¸æ”¯æŒä¼˜å…ˆè´¹æŸ¥è¯¢ï¼‰
]
commitment = "processed"
timeout = 30000  # 30ç§’

# ===================================================================
# é’±åŒ…é…ç½® - ä½¿ç”¨æ‚¨å·²é…ç½®çš„é—ªç”µè´·é’±åŒ…
# ===================================================================
[keypair]
path = "./keypairs/flashloan-wallet.json"
min_balance_sol = 0.001  # å¹²è¿è¡Œæ¨¡å¼ä¸éœ€è¦å¤ªå¤šä½™é¢

# ===================================================================
# ç»æµŽæ¨¡åž‹é…ç½®
# ===================================================================
[economics]
capital_size = "medium"

[economics.cost]
signature_count = 4  # é—ªç”µè´·éœ€è¦é¢å¤–ç­¾å
compute_units = 800_000  # å¤æ‚äº¤æ˜“éœ€è¦æ›´å¤šè®¡ç®—å•å…ƒ
compute_unit_price = 35_000  # ä»Ž20_000æå‡åˆ°35_000ï¼ˆé…åˆåŠ¨æ€æœ€ä½Žä¿éšœï¼‰
use_flash_loan = true
flash_loan_amount = 100_000_000_000  # é»˜è®¤å€Ÿæ¬¾ 100 SOL

[economics.profit]
# åˆ©æ¶¦å¿…é¡»è¦†ç›–æ‰€æœ‰è´¹ç”¨
# æˆæœ¬åˆ†æž:
#   - å›ºå®šæˆæœ¬: åŸºç¡€è´¹ 20K + ä¼˜å…ˆè´¹ 16K-80K = 36K-100K lamports
#   - æˆåŠŸåŽè´¹ç”¨: Jito Tip (10%æ¯›åˆ©) + æ»‘ç‚¹ç¼“å†² (~200K) = ~395K lamports
#   - æ€»æˆæœ¬: æŽ¨è 143K, é«˜å³° 190K lamports
#   - 2M lamports = 14.0x æŽ¨èæˆæœ¬ï¼Œ10.5x é«˜å³°æˆæœ¬ âœ…âœ…ï¼ˆå‡€åˆ©æ¶¦1.56Mï¼Œæˆæœ¬çš„10.9å€ï¼‰
#   - å®žé™…ç›ˆåˆ©: 1.5ä¸ª/5ç§’ Ã— 1.56M Ã— 90%æˆåŠŸçŽ‡ = 0.00152 SOL/å°æ—¶ï¼ˆæœ€ä¼˜ï¼‰
min_profit_lamports = 2_000_000  # 0.002 SOLï¼ˆç¬¬äºŒæ¬¡éªŒè¯é˜ˆå€¼ï¼‰
min_roi = 200  # 200% ROIï¼ˆåŸºäºŽè´¹ç”¨ï¼Œä¸æ˜¯æœ¬é‡‘ï¼‰
max_slippage = 0.015  # 1.5% æœ€å¤§æ»‘ç‚¹
min_liquidity_usd = 100000  # åªé€‰æ‹©å¤§æ± å­ï¼ˆ$100k+æµåŠ¨æ€§ï¼‰

[economics.risk]
# é£Žé™©æŽ§åˆ¶ - é—ªç”µè´·å¤±è´¥æˆæœ¬é«˜ï¼Œéœ€è¦æ›´ä¿å®ˆ
max_consecutive_failures = 3  # è¿žç»­å¤±è´¥ 3 æ¬¡æš‚åœ
max_hourly_loss_lamports = 1_000_000  # æ¯å°æ—¶æœ€å¤šäºæŸ 0.001 SOL
min_success_rate = 0.6  # æˆåŠŸçŽ‡ä½ŽäºŽ 60% æš‚åœ
cooldown_period = 600_000  # è§¦å‘ç†”æ–­åŽå†·å´ 10 åˆ†é’Ÿ

[economics.jito]
# Jito å°è´¹é…ç½® - ä¼˜åŒ–åŽå¹³è¡¡ç­–ç•¥
min_tip_lamports = 100_000  # 0.0001 SOL
max_tip_lamports = 100_000_000  # 0.1 SOL
profit_share_percentage = 10  # ä»Ž30%é™è‡³10%ï¼ŒèŠ‚çœ20%æ¯›åˆ©æ¶¦
competition_multiplier = 2.0
urgency_multiplier = 1.5

# ===================================================================
# é—ªç”µè´·é…ç½® - Jupiter Lend åè®®ï¼ˆ0% è´¹çŽ‡ï¼ï¼‰
# ===================================================================
[flashloan]
provider = "jupiter-lend"

[flashloan.jupiter_lend]
min_borrow_amount = 10_000_000_000  # æœ€å°å€Ÿæ¬¾ 10 SOL
max_borrow_amount = 1_000_000_000_000  # æœ€å¤§å€Ÿæ¬¾ 1000 SOL
fee_rate = 0.0  # 0% è´¹çŽ‡ï¼ˆå®Œå…¨å…è´¹ï¼ï¼‰

[flashloan.solend]
lending_market = "4UpD2fh7xH3VP9QQaXtsS1YY3bxzWhtfpks7FatyKvdY"
reserve_sol = "8PbodeaosQP19SjYFx855UMqWxH2HynZLdBXmsrbac36"
min_borrow_amount = 10_000_000_000  # æœ€å°å€Ÿæ¬¾ 10 SOL
max_borrow_amount = 1_000_000_000_000  # æœ€å¤§å€Ÿæ¬¾ 1000 SOL
fee_rate = 0.0009  # 0.09% è´¹çŽ‡

[flashloan.dynamic_sizing]
enabled = true  # ä½¿ç”¨æ”¹è¿›çš„åŠ¨æ€å€Ÿæ¬¾ç®—æ³•ï¼ˆåŸºäºŽåˆ©æ¶¦çŽ‡ï¼‰
min_multiplier = 10  # åŸºäºŽæŸ¥è¯¢é‡‘é¢çš„æœ€å°å€æ•°ï¼ˆä½Žåˆ©æ¶¦çŽ‡åœºæ™¯ï¼‰
max_multiplier = 100  # åŸºäºŽæŸ¥è¯¢é‡‘é¢çš„æœ€å¤§å€æ•°ï¼ˆé«˜åˆ©æ¶¦çŽ‡åœºæ™¯ï¼‰
safety_margin = 0.8  # å®‰å…¨è¾¹é™…ï¼šå€Ÿç†è®ºæœ€ä¼˜å€¼çš„80%ï¼ˆé™ä½Žé£Žé™©ï¼‰

# ===================================================================
# Jupiter API é…ç½®ï¼ˆä¿ç•™ç”¨äºŽæœªæ¥é«˜çº§åŠŸèƒ½ï¼‰
# ===================================================================
[jupiter_api]
# âš ï¸ æ³¨æ„ï¼šå½“å‰ç³»ç»Ÿä½¿ç”¨ Legacy Quote API (https://quote-api.jup.ag/v6/quote)
# æ­¤é…ç½®ä¿ç•™ç”¨äºŽæœªæ¥å¯èƒ½çš„ Ultra Order API åŠŸèƒ½ï¼ˆå¦‚ Iris, Predictive Executionï¼‰
# 
# API å¯¹æ¯”ï¼š
# - Quote API (å½“å‰ä½¿ç”¨): å…è´¹ã€æ— éœ€è®¤è¯ã€P50 å»¶è¿Ÿ ~100msã€é€‚åˆå¿«é€Ÿä»·æ ¼æŸ¥è¯¢
# - Ultra Order API (å¤‡ç”¨): éœ€è¦ API Keyã€P50 å»¶è¿Ÿ ~300msã€æ”¯æŒé«˜çº§è·¯ç”±å’Œäº¤æ˜“ç”Ÿæˆ
#
# ä»Ž https://portal.jup.ag/ èŽ·å– API Keyï¼ˆå¦‚éœ€åˆ‡æ¢åˆ° Ultra APIï¼‰
api_key = "3cf45ad3-12bc-4832-9307-d0b76357e005"  # ä¿ç•™å¤‡ç”¨
endpoint = "https://api.jup.ag/ultra"  # ä¿ç•™å¤‡ç”¨ï¼ˆUltra API ç«¯ç‚¹ï¼‰
# 
# å½“å‰å®žé™…ä½¿ç”¨çš„ API: https://quote-api.jup.ag/v6/quote
# å¦‚éœ€åˆ‡æ¢å›ž Ultra Order API: https://api.jup.ag/ultra/v1/order

# ===================================================================
# Jupiter Server é…ç½®
# ===================================================================
[jupiter_server]
rpc_url = "https://solana-api.projectserum.com"
port = 8080
enable_circular_arbitrage = true
max_routes = 3
only_direct_routes = false

# ===================================================================
# æœºä¼šå‘çŽ°å™¨é…ç½®
# ===================================================================
[opportunity_finder]
mints_file = "mints-simple.txt"  # åˆå§‹ä»£å¸åˆ—è¡¨
# æ¡¥æŽ¥ä»£å¸ä»Ž bridge-tokens.json è‡ªåŠ¨åŠ è½½ï¼ˆOpportunityFinder è¯»å–å¹¶åˆ†é…ç»™Workersï¼‰
# çŽ¯å½¢å¥—åˆ©è·¯å¾„ = åˆå§‹ä»£å¸ Ã— æ¡¥æŽ¥ä»£å¸ï¼ˆåŒå‘æŸ¥è¯¢ï¼‰

# é€ŸçŽ‡é™åˆ¶é…ç½® - æ–¹æ¡ˆBå‡è¡¡åž‹ï¼ˆ4 Workers Ã— 4 Tokensï¼‰
# ============================================================
# Workeråˆ†é…ç­–ç•¥ï¼šæ¯ä¸ªWorkerè´Ÿè´£1ä¸ªç‰¹å®šæ¡¥æŽ¥ä»£å¸
#   Worker 0 â†’ USDC (æœ€é«˜æµåŠ¨æ€§)
#   Worker 1 â†’ USDT (é«˜æµåŠ¨æ€§)
#   Worker 2 â†’ mSOL (è´¨æŠ¼è¡ç”Ÿå“)
#   Worker 3 â†’ jitoSOL (Jitoç”Ÿæ€)
#
# é€ŸçŽ‡è®¡ç®—ï¼š
#   4 Workers Ã— (60Ã·3ç§’) Ã— 2æŸ¥è¯¢ = 160æ¬¡/åˆ†é’Ÿ â‰ˆ 27æ¬¡/10ç§’
#   Ultra APIé™åˆ¶: 50æ¬¡/10ç§’ï¼ˆåŸºç¡€é…é¢ï¼‰
#   åˆ©ç”¨çŽ‡: 27Ã·50 = 54% âœ… å®‰å…¨èŒƒå›´ï¼ˆ40-60%ï¼‰
#   å®‰å…¨ä½™é‡: 46%ï¼ˆå®¹å¿ç½‘ç»œæŠ–åŠ¨å’Œé‡è¯•ï¼‰
# ============================================================
worker_count = 4  # ðŸš€ æ–¹æ¡ˆBå‡è¡¡åž‹ï¼š4ä¸ªWorkerï¼Œæ¯ä¸ªè´Ÿè´£1ä¸ªæ¡¥æŽ¥ä»£å¸
query_interval_ms = 3000  # ðŸš€ æ–¹æ¡ˆBï¼š3ç§’é—´éš”ï¼Œ54%åˆ©ç”¨çŽ‡ï¼ˆ27æ¬¡/10ç§’ï¼‰
min_profit_lamports = 5_000_000  # 0.005 SOLï¼ˆç¬¬ä¸€æ¬¡è¿‡æ»¤é˜ˆå€¼ï¼‰
slippage_bps = 50  # 0.5% æ»‘ç‚¹

[opportunity_finder.flashloan_filter]
# é—ªç”µè´·ç‰¹æ®Šè¿‡æ»¤ - åªæ‰¾å¤§æœºä¼š
min_gross_profit_multiplier = 3  # æ¯›åˆ©æ¶¦å¿…é¡»æ˜¯è´¹ç”¨çš„ 3 å€
required_liquidity_multiplier = 2  # æµåŠ¨æ€§å¿…é¡»æ˜¯å€Ÿæ¬¾çš„ 2 å€

# ===================================================================
# æ‰§è¡Œå™¨é…ç½® - ä½¿ç”¨ Jito MEVï¼ˆæ¨¡æ‹Ÿï¼‰
# ===================================================================
[execution]
mode = "jito"  # é—ªç”µè´·å¿…é¡»ç”¨ Jito ç¡®ä¿åŽŸå­æ€§
max_concurrent_trades = 1  # ä¸å¹¶å‘æ‰§è¡Œ

[jito]
block_engine_url = "https://mainnet.block-engine.jito.wtf"
# æ³¨æ„ï¼šå¹²è¿è¡Œæ¨¡å¼ä¸‹ï¼ŒJito è¿žæŽ¥ä¼šè¢«åˆå§‹åŒ–ä½†ä¸ä¼šå®žé™…å‘é€äº¤æ˜“
auth_keypair_path = "./keypairs/flashloan-wallet.json"
check_jito_leader = true  # å¿…é¡»å¯ç”¨ï¼
min_tip_lamports = 100_000
max_tip_lamports = 100_000_000
tip_strategy = "balanced"
confirmation_timeout = 45000  # 45ç§’ï¼ˆé—ªç”µè´·äº¤æ˜“æ›´å¤æ‚ï¼‰

# ===================================================================
# ç›‘æŽ§é…ç½® - å¹²è¿è¡Œæ¨¡å¼ç¦ç”¨é€šçŸ¥
# ===================================================================
[monitoring]
enabled = true  # âœ… å¯ç”¨å¾®ä¿¡æŽ¨é€

# æœºä¼šå‘çŽ°é€šçŸ¥ï¼ˆé¦–æ¬¡ï¼‰
alert_on_opportunity_found = false  # ä¸æŽ¨é€é¦–æ¬¡å‘çŽ°
min_opportunity_profit_for_alert = 5_000_000  # 0.005 SOL
opportunity_alert_rate_limit_ms = 10000  # 10ç§’

# æœºä¼šéªŒè¯é€šçŸ¥ï¼ˆäºŒæ¬¡éªŒè¯é€šè¿‡ï¼‰
alert_on_opportunity_validated = true  # âœ… æŽ¨é€äºŒæ¬¡éªŒè¯é€šè¿‡çš„æœºä¼š
min_validated_profit_for_alert = 2_000_000  # 0.002 SOLï¼ˆä¸Žç¬¬äºŒæ¬¡éªŒè¯é˜ˆå€¼ä¿æŒä¸€è‡´ï¼‰
validated_alert_rate_limit_ms = 5000  # 5ç§’

# Serveré…±é…ç½®
[monitoring.serverchan]
send_key = "SCT299918Tjm2hNLuwKRB9DqqHaiDvj3kJ"  # æ‚¨çš„ SendKey
enabled = true

# ===================================================================
# æ—¥å¿—é…ç½® - è¯¦ç»†æ—¥å¿—
# ===================================================================
[logging]
level = "info"  # info çº§åˆ«ï¼ˆå¯æ”¹ä¸º debug æŸ¥çœ‹æ›´å¤šç»†èŠ‚ï¼‰
pretty_print = true
file_output = true
log_dir = "./logs"
log_file_name = "flashloan-dryrun.log"
console_output = true

[logging.flashloan]
log_borrow_details = true
log_swap_steps = true
log_repay_details = true

# ===================================================================
# å®‰å…¨é…ç½®
# ===================================================================
[security]
max_daily_trades = 1000  # å¹²è¿è¡Œæ¨¡å¼å¯ä»¥å¤šä¸€äº›
max_daily_loss_sol = 999  # å¹²è¿è¡Œä¸ä¼šçœŸå®žäºæŸ
max_single_trade_fee_sol = 999  # å¹²è¿è¡Œä¸é™åˆ¶

[security.flashloan_checks]
verify_repay_amount = true
verify_profit_after_fees = true
simulate_before_execute = true
emergency_stop_on_failed_repay = true

# ===================================================================
# äº¤æ˜“æž„å»ºé…ç½®
# ===================================================================
[transaction_builder]
use_versioned_transaction = true
use_lut = true

[transaction_builder.lut]
preload_common_accounts = true
include_dex_accounts = true
include_lending_accounts = true

# ===================================================================
# æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼‰
# ===================================================================
[database]
enabled = true
url = "postgresql://postgres:Yuan971035088@localhost:5432/postgres?schema=public"  # PostgreSQLè¿žæŽ¥

# ===================================================================
# å¹²è¿è¡Œæ¨¡å¼è¯´æ˜Ž
# ===================================================================
#
# åœ¨å¹²è¿è¡Œæ¨¡å¼ä¸‹ï¼Œæœºå™¨äººä¼šï¼š
# âœ… å¯åŠ¨ Jupiter Serverï¼ˆæœ¬åœ° APIï¼‰
# âœ… æ‰«æçœŸå®žçš„å¥—åˆ©æœºä¼š
# âœ… è®¡ç®—é—ªç”µè´·é‡‘é¢å’Œé¢„æœŸåˆ©æ¶¦
# âœ… æ˜¾ç¤ºè¯¦ç»†çš„äº¤æ˜“è·¯å¾„å’Œè´¹ç”¨
# âœ… è®°å½•æ‰€æœ‰æ—¥å¿—åˆ°æ–‡ä»¶
# âŒ ä½†ä¸ä¼šå‘é€çœŸå®žäº¤æ˜“
# âŒ ä¸ä¼šæ¶ˆè€— SOLï¼ˆé™¤äº†å°‘é‡ RPC æŸ¥è¯¢ï¼‰
#
# ä½ ä¼šçœ‹åˆ°çš„è¾“å‡ºï¼š
# - [DRY RUN] Would borrow 100 SOL from Solend
# - [DRY RUN] Would swap SOL -> USDC -> BTC -> SOL
# - [DRY RUN] Expected profit: 0.015 SOL
# - [DRY RUN] Would send bundle to Jito with 0.001 SOL tip
#
# ===================================================================

