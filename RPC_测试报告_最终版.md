# ğŸ§ª RPC ç«¯ç‚¹æµ‹è¯•æŠ¥å‘Š - æœ€ç»ˆç‰ˆ

**æµ‹è¯•æ—¶é—´**: 2025-10-28 12:52  
**æµ‹è¯•å·¥å…·**: `test-all-rpc-endpoints.ts`  
**æµ‹è¯•ç½‘ç»œ**: Solana Mainnet-Beta

---

## ğŸ“Š æµ‹è¯•ç»“æœæ€»è§ˆ

| ç»Ÿè®¡é¡¹ | æ•°å€¼ |
|--------|------|
| **æ€»ç«¯ç‚¹æ•°** | 6 |
| **âœ… æˆåŠŸ** | 3 |
| **âŒ å¤±è´¥** | 3 |
| **æˆåŠŸç‡** | 50% |
| **æ€»å®¹é‡** | **70 RPS** |

---

## âœ… å¯ç”¨ç«¯ç‚¹è¯¦æƒ…

### ğŸ¥‡ ç¬¬ä¸€å: Helius è´¦å·1

```
æä¾›å•†: Helius
å»¶è¿Ÿ: 1228ms
é€Ÿç‡é™åˆ¶: 10 RPS
WebSocket: âœ… æ”¯æŒ
çŠ¶æ€: âœ… æ­£å¸¸
Genesis Hash: âœ… åŒ¹é… mainnet-beta
Solana ç‰ˆæœ¬: 3.0.6
å½“å‰ Slot: 376287423

HTTP ç«¯ç‚¹:
https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683

WebSocket ç«¯ç‚¹:
wss://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683
```

**ä¼˜åŠ¿**:
- âœ… å»¶è¿Ÿæœ€ä½ï¼ˆ1228msï¼‰
- âœ… ç¨³å®šå¯é 
- âœ… å®Œæ•´ WebSocket æ”¯æŒ
- âœ… é€‚åˆå®æ—¶è®¢é˜…

---

### ğŸ¥ˆ ç¬¬äºŒå: Helius è´¦å·2

```
æä¾›å•†: Helius
å»¶è¿Ÿ: 1243ms
é€Ÿç‡é™åˆ¶: 10 RPS
WebSocket: âœ… æ”¯æŒ
çŠ¶æ€: âœ… æ­£å¸¸
Genesis Hash: âœ… åŒ¹é… mainnet-beta
Solana ç‰ˆæœ¬: 3.0.6
å½“å‰ Slot: 376287423

HTTP ç«¯ç‚¹:
https://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65

WebSocket ç«¯ç‚¹:
wss://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65
```

**ä¼˜åŠ¿**:
- âœ… å»¶è¿Ÿä¼˜ç§€ï¼ˆ1243msï¼‰
- âœ… ä¸è´¦å·1ç»„åˆæä¾› 20 RPS
- âœ… å®Œæ•´ WebSocket æ”¯æŒ
- âœ… è´Ÿè½½å‡è¡¡å¤‡ä»½

---

### ğŸ¥‰ ç¬¬ä¸‰å: Alchemy

```
æä¾›å•†: Alchemy
å»¶è¿Ÿ: 2131ms
é€Ÿç‡é™åˆ¶: 330 CU/s â‰ˆ 50 RPS
WebSocket: âœ… æ”¯æŒ
çŠ¶æ€: âœ… æ­£å¸¸
Genesis Hash: âœ… åŒ¹é… mainnet-beta
Solana ç‰ˆæœ¬: 2.3.13
å½“å‰ Slot: 376287426

HTTP ç«¯ç‚¹:
https://solana-mainnet.g.alchemy.com/v2/KdZvViY51ReRsivlLqSmx

WebSocket ç«¯ç‚¹:
wss://solana-mainnet.g.alchemy.com/v2/KdZvViY51ReRsivlLqSmx
```

**ä¼˜åŠ¿**:
- âœ… å®¹é‡æœ€å¤§ï¼ˆ50 RPSï¼‰
- âœ… å…è´¹é¢åº¦é«˜ï¼ˆ1200ä¸‡è¯·æ±‚/æœˆï¼‰
- âœ… WebSocket æ”¯æŒ
- âš ï¸ å»¶è¿Ÿè¾ƒé«˜ï¼ˆ2131msï¼‰

**å»ºè®®**:
- ä½œä¸ºé«˜å®¹é‡å¤‡ç”¨
- é€‚åˆæ‰¹é‡æŸ¥è¯¢
- WebSocket è®¢é˜…å¯èƒ½æœ‰é™åˆ¶

---

## âŒ å¤±è´¥ç«¯ç‚¹åˆ†æ

### 1. Ankr

```
çŠ¶æ€: âŒ å¤±è´¥
é”™è¯¯: 403 Forbidden
é”™è¯¯è¯¦æƒ…: 
{
  "error": "message: API key is not allowed to access blockchain, 
   json-rpc code: -32052, 
   rest code: 403"
}
```

**æ ¹æœ¬åŸå› **:
- API Key æƒé™ä¸è¶³æˆ–æ— æ•ˆ
- å¯èƒ½æ˜¯å…è´¹å¥—é¤é™åˆ¶
- å¯èƒ½éœ€è¦é‡æ–°æ³¨å†Œæˆ–éªŒè¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Ankr æ§åˆ¶å°çš„ API Key çŠ¶æ€
2. ç¡®è®¤æ˜¯å¦éœ€è¦é‚®ç®±éªŒè¯
3. å°è¯•åˆ›å»ºæ–°çš„ API Key
4. æˆ–è€…æ”¾å¼ƒä½¿ç”¨ Ankrï¼ˆç°æœ‰ç«¯ç‚¹å·²è¶³å¤Ÿï¼‰

---

### 2. QuickNode

```
çŠ¶æ€: âŒ å¤±è´¥
é”™è¯¯: 404 Not Found
æµ‹è¯• URL: https://api.quicknode.com/solana/mainnet/QN_e8ae6d6aa11f486895510c87b2178516
```

**æ ¹æœ¬åŸå› **:
- URL æ ¼å¼ä¸æ­£ç¡®
- QuickNode éœ€è¦ä»æ§åˆ¶å°è·å–å”¯ä¸€çš„å®Œæ•´ URL
- API Key æ ¼å¼æ­£ç¡®ï¼Œä½†ç«¯ç‚¹ URL é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:

**Step 1**: ç™»å½• QuickNode Dashboard
```
https://www.quicknode.com/endpoints
```

**Step 2**: æ‰¾åˆ° Solana Mainnet ç«¯ç‚¹ï¼Œå¤åˆ¶ "HTTP Provider" URL

æ­£ç¡®æ ¼å¼ç¤ºä¾‹ï¼š
```
https://ancient-quiet-surf.solana-mainnet.quiknode.pro/abc123def456/
https://your-unique-name.solana-mainnet.quiknode.pro/token/
```

**Step 3**: æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„ URL

**é¢„æœŸæ”¶ç›Š**:
- æ·»åŠ  50 RPS å®¹é‡
- æ€»å®¹é‡å¯è¾¾ 120 RPS
- å»¶è¿Ÿé¢„è®¡ 100-200ms

---

### 3. Solana å®˜æ–¹å…¬å…±ç«¯ç‚¹

```
çŠ¶æ€: âŒ å¤±è´¥
é”™è¯¯: fetch failed
URL: https://api.mainnet-beta.solana.com
```

**æ ¹æœ¬åŸå› **:
- ç½‘ç»œè¿æ¥é—®é¢˜
- å›½å†…è®¿é—®å¯èƒ½è¢«é™åˆ¶
- æˆ–å…¬å…±ç«¯ç‚¹ä¸´æ—¶ä¸å¯ç”¨

**å»ºè®®**:
- å…¬å…±ç«¯ç‚¹ä¸ç¨³å®šï¼Œä¸æ¨èç”¨äºç”Ÿäº§
- å·²æœ‰è¶³å¤Ÿçš„ä¸“ç”¨ç«¯ç‚¹ï¼Œæ— éœ€ä¿®å¤

---

## ğŸ’ª å®¹é‡åˆ†æ

### å½“å‰å¯ç”¨å®¹é‡

| ç«¯ç‚¹ | é€Ÿç‡é™åˆ¶ | å æ¯” |
|------|---------|------|
| Helius è´¦å·1 | 10 RPS | 14.3% |
| Helius è´¦å·2 | 10 RPS | 14.3% |
| Alchemy | 50 RPS | 71.4% |
| **æ€»è®¡** | **70 RPS** | **100%** |

### ä½¿ç”¨åœºæ™¯ä¼°ç®—

**åœºæ™¯1: å¸‚åœºæ‰«æå™¨ï¼ˆå½“å‰é…ç½®ï¼‰**
```
å¸‚åœºæ•°é‡: 2 ä¸ªæ± å­
æ¯æ¬¡æ‰«æ: 2 ä¸ª RPC è¯·æ±‚ï¼ˆæ± å­ + tokenè´¦æˆ·ï¼‰
æ‰«æé—´éš”: 150ms
æ¯ç§’æ‰«æ: 6.67 æ¬¡
æ¯ç§’ RPC: 13.3 æ¬¡

å®¹é‡ä½¿ç”¨ç‡: 13.3 / 70 = 19% âœ… éå¸¸å®‰å…¨
```

**åœºæ™¯2: å¢åŠ å¸‚åœºæ•°é‡**
```
å¦‚æœå¢åŠ åˆ° 10 ä¸ªå¸‚åœº:
æ¯æ¬¡æ‰«æ: 20 ä¸ª RPC è¯·æ±‚
æ‰«æé—´éš”: 150ms
æ¯ç§’ RPC: 133 æ¬¡ âŒ è¶…æ ‡

éœ€è¦è°ƒæ•´ä¸º:
æ‰«æé—´éš”: 500ms
æ¯ç§’ RPC: 40 æ¬¡ âœ… å¯è¡Œ
```

**åœºæ™¯3: é«˜é¢‘æ‰«æ**
```
æ‰«æé—´éš”: 100ms (æ¯ç§’10æ¬¡)
å¸‚åœºæ•°é‡: 2 ä¸ª
æ¯ç§’ RPC: 20 æ¬¡

å®¹é‡ä½¿ç”¨ç‡: 20 / 70 = 29% âœ… å®‰å…¨
```

### æ½œåœ¨å®¹é‡ï¼ˆä¿®å¤ QuickNode åï¼‰

| ç«¯ç‚¹ | é€Ÿç‡é™åˆ¶ |
|------|---------|
| Helius è´¦å·1 | 10 RPS |
| Helius è´¦å·2 | 10 RPS |
| Alchemy | 50 RPS |
| **QuickNode** | **50 RPS** |
| **æ€»è®¡** | **120 RPS** |

---

## ğŸ“¡ WebSocket æ”¯æŒæƒ…å†µ

### âœ… å®Œå…¨æ”¯æŒ WebSocket çš„ç«¯ç‚¹

1. **Helius è´¦å·1** âœ…  
   - ç«¯ç‚¹: `wss://mainnet.helius-rpc.com/?api-key=d261c4a1...`
   - æ”¯æŒæ–¹æ³•: å…¨éƒ¨ Solana è®¢é˜…æ–¹æ³•
   - ç¨³å®šæ€§: ä¼˜ç§€

2. **Helius è´¦å·2** âœ…  
   - ç«¯ç‚¹: `wss://mainnet.helius-rpc.com/?api-key=7df840f7...`
   - æ”¯æŒæ–¹æ³•: å…¨éƒ¨ Solana è®¢é˜…æ–¹æ³•
   - ç¨³å®šæ€§: ä¼˜ç§€

3. **Alchemy** âš ï¸  
   - ç«¯ç‚¹: `wss://solana-mainnet.g.alchemy.com/v2/KdZvViY...`
   - æ”¯æŒæ–¹æ³•: éƒ¨åˆ†ï¼ˆéœ€æµ‹è¯•ï¼‰
   - ç¨³å®šæ€§: æœªçŸ¥

### æ¨è WebSocket é…ç½®

**ä¸»ç”¨**: Heliusï¼ˆä¸“æ³¨ Solanaï¼Œç¨³å®šæ€§æœ€ä½³ï¼‰
```typescript
const wsUrl = 'wss://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683';
```

**å¤‡ç”¨**: Helius è´¦å·2
```typescript
const wsBackup = 'wss://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65';
```

---

## ğŸ¯ æ¨èé…ç½®

### ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆæœ€ä½³å®è·µï¼‰

```toml
[rpc]
# æŒ‰æ€§èƒ½æ’åºçš„ç«¯ç‚¹
urls = [
  "https://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683",
  "https://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65",
  "https://solana-mainnet.g.alchemy.com/v2/KdZvViY51ReRsivlLqSmx"
]

commitment = "confirmed"
min_time = 30
max_concurrent = 20

[markets]
scan_interval_ms = 150  # æ¯ç§’ 6.67 æ¬¡æ‰«æ = 13.3 RPS

[websocket]
enabled = true
primary = "wss://mainnet.helius-rpc.com/?api-key=d261c4a1-fffe-4263-b0ac-a667c05b5683"
backup = "wss://mainnet.helius-rpc.com/?api-key=7df840f7-134f-4b6a-91fb-a4515a5f3f65"
```

### æ€§èƒ½è°ƒä¼˜é…ç½®ï¼ˆæ›´æ¿€è¿›ï¼‰

```toml
[rpc]
min_time = 20           # é™ä½åˆ° 20ms
max_concurrent = 30     # æé«˜åˆ° 30

[markets]
scan_interval_ms = 100  # æé«˜åˆ°æ¯ç§’ 10 æ¬¡æ‰«æ = 20 RPS
```

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯åšï¼ˆæ¨èï¼‰

1. âœ… **ä½¿ç”¨å½“å‰é…ç½®å¯åŠ¨æœºå™¨äºº**
   ```bash
   # å¤åˆ¶ä¼˜åŒ–é…ç½®
   cp packages/onchain-bot/config.final-optimized.toml packages/onchain-bot/config.toml
   
   # æµ‹è¯•å¸‚åœºæ‰«æå™¨
   pnpm tsx packages/onchain-bot/src/test-market-scanner-fix.ts
   ```

2. âœ… **å¼€å§‹ä½é¢‘å¥—åˆ©æµ‹è¯•**
   - å½“å‰å®¹é‡å……è¶³ï¼ˆ19% ä½¿ç”¨ç‡ï¼‰
   - å¯ä»¥å®‰å…¨è¿è¡Œ

### å¯é€‰ä¼˜åŒ–ï¼ˆæå‡å®¹é‡ï¼‰

3. âš ï¸ **ä¿®å¤ QuickNode**ï¼ˆå¯é€‰ï¼‰
   - è®¿é—®æ§åˆ¶å°è·å–å®Œæ•´ URL
   - é¢„æœŸå¢åŠ  50 RPS
   - æ€»å®¹é‡å¯è¾¾ 120 RPS

4. âš ï¸ **ä¿®å¤ Ankr**ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
   - æ£€æŸ¥ API Key çŠ¶æ€
   - æˆ–é‡æ–°æ³¨å†Œ
   - é¢„æœŸå¢åŠ  30 RPS

---

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### å»¶è¿Ÿå¯¹æ¯”ï¼ˆä»ä½åˆ°é«˜ï¼‰

```
ğŸ¥‡ Helius è´¦å·1:   1228ms  â˜…â˜…â˜…â˜…â˜…
ğŸ¥ˆ Helius è´¦å·2:   1243ms  â˜…â˜…â˜…â˜…â˜…
ğŸ¥‰ Alchemy:        2131ms  â˜…â˜…â˜…â˜†â˜†
```

### å®¹é‡å¯¹æ¯”

```
ğŸ¥‡ Alchemy:        50 RPS  (71.4%)
ğŸ¥ˆ Helius è´¦å·1:   10 RPS  (14.3%)
ğŸ¥ˆ Helius è´¦å·2:   10 RPS  (14.3%)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ€»è®¡:              70 RPS  (100%)
```

### æ€§ä»·æ¯”ï¼ˆå…è´¹å¥—é¤ï¼‰

```
ğŸ¥‡ Alchemy:        1200ä¸‡è¯·æ±‚/æœˆ
ğŸ¥ˆ QuickNode:      1000ä¸‡è¯·æ±‚/æœˆ (éœ€ä¿®å¤)
ğŸ¥‰ Helius:         100ä¸‡ç§¯åˆ†/æœˆ Ã— 2
```

---

## ğŸ’¡ ä¸“å®¶å»ºè®®

### å½“å‰çŠ¶æ€è¯„ä¼°

âœ… **å¯ä»¥ç«‹å³æŠ•å…¥ç”Ÿäº§**
- 3 ä¸ªç¨³å®šç«¯ç‚¹
- 70 RPS æ€»å®¹é‡
- æ”¯æŒ WebSocket è®¢é˜…
- å®¹é‡ä½¿ç”¨ç‡ä»… 19%

### ä¼˜åŒ–ä¼˜å…ˆçº§

1. **é«˜ä¼˜å…ˆçº§**: æ— ï¼ˆå½“å‰é…ç½®å·²ä¼˜ç§€ï¼‰
2. **ä¸­ä¼˜å…ˆçº§**: ä¿®å¤ QuickNodeï¼ˆæå‡ 71%å®¹é‡ï¼‰
3. **ä½ä¼˜å…ˆçº§**: ä¿®å¤ Ankrï¼ˆæå‡ 43%å®¹é‡ï¼‰

### é£é™©æç¤º

âš ï¸ **Alchemy å»¶è¿Ÿè¾ƒé«˜**
- 2131ms å»¶è¿Ÿå¯èƒ½å½±å“å®æ—¶æ€§
- å»ºè®®ä¼˜å…ˆä½¿ç”¨ Helius å¤„ç†å…³é”®æŸ¥è¯¢
- Alchemy ç”¨äºæ‰¹é‡æŸ¥è¯¢å’Œå¤‡ä»½

âš ï¸ **å•ç‚¹æ•…éšœé£é™©**
- Alchemy å  71%å®¹é‡
- å¦‚æœ Alchemy æ•…éšœï¼Œå®¹é‡é™è‡³ 20 RPS
- å»ºè®®ä¿®å¤ QuickNode ä½œä¸ºå¤‡ä»½

---

## ğŸ“ æ€»ç»“

### âœ… æµ‹è¯•æˆåŠŸ

- 3/6 ç«¯ç‚¹å¯ç”¨
- 70 RPS æ€»å®¹é‡
- å…¨éƒ¨æ”¯æŒ WebSocket
- å·²è¿æ¥åˆ°æ­£ç¡®çš„ mainnet-beta

### ğŸ¯ æ¨èè¡ŒåŠ¨

1. âœ… **ç«‹å³ä½¿ç”¨**: `config.final-optimized.toml`
2. âœ… **å¼€å§‹æµ‹è¯•**: å¸‚åœºæ‰«æå™¨
3. âš ï¸ **å¯é€‰**: ä¿®å¤ QuickNodeï¼ˆæå‡å®¹é‡ï¼‰

### ğŸ“‚ ç›¸å…³æ–‡ä»¶

- æµ‹è¯•è„šæœ¬: `packages/onchain-bot/test-all-rpc-endpoints.ts`
- ä¼˜åŒ–é…ç½®: `packages/onchain-bot/config.final-optimized.toml`
- æœ¬æŠ¥å‘Š: `RPC_æµ‹è¯•æŠ¥å‘Š_æœ€ç»ˆç‰ˆ.md`

---

**æµ‹è¯•å®Œæˆæ—¶é—´**: 2025-10-28 12:52  
**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-28 12:53  
**æœ‰æ•ˆæœŸ**: é•¿æœŸæœ‰æ•ˆï¼ˆé™¤é API Key å¤±æ•ˆï¼‰

