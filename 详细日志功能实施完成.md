# ğŸ” **è¯¦ç»†æ—¥å¿—åŠŸèƒ½å®æ–½å®ŒæˆæŠ¥å‘Š**

## âœ… **å®æ–½å†…å®¹**

### **1. äº‹ä»¶é©±åŠ¨æ¨¡å¼æ—¥å¿—å¢å¼º**

#### **ä»·æ ¼æ›´æ–°ç»Ÿè®¡**
```rust
// æ¯10ä¸ªäº‹ä»¶æ‰“å°ä¸€æ¬¡ç»Ÿè®¡
ğŸ“Š Price update stats: X total events, Y filtered, Z scans triggered
```

#### **è§¦å‘äº‹ä»¶è¯¦æƒ…**
```rust
ğŸ¯ Significant price change detected:
   Pool: RAY/USDC (Raydium V4)
   Change: 0.75% (threshold: 0.5%)
   Old price: Some(0.1096)
   New price: 0.1104
   âœ… Triggering arbitrage scan #1
```

#### **é˜²æŠ–è·³è¿‡**
```rust
   â­ï¸  Skipped: debounce not satisfied (50ms < 100ms)
```

#### **å¹¶å‘é™åˆ¶**
```rust
   â¸ï¸  Scan skipped: max concurrent scans reached (3)
```

---

### **2. æ‰«æè¿‡ç¨‹è¯¦ç»†æ—¥å¿—**

#### **æ‰«æå¯åŠ¨**
```rust
ğŸ” Starting arbitrage scan...
   Initial amount: $1000
   Min ROI: 0.1%
   Router mode: Complete
```

#### **æ•°æ®è·å–**
```rust
   ğŸ“¡ Fetching price data...
   âœ… Using consistent snapshot with 27 pools
   ğŸ“Š Latest slot: 376495744, using 27 pools for routing
```

#### **å¹¶è¡Œç®—æ³•æ‰§è¡Œ**
```rust
   ğŸš€ Starting parallel scan: Quick (2-3 hop) + Bellman-Ford (4-6 hop)
   âš¡ Quick scan: 4 paths in 2.3ms
   ğŸ” Bellman-Ford: 2 paths in 18.7ms
```

#### **å»é‡å’Œè¿‡æ»¤**
```rust
   ğŸ”„ Removed 1 duplicate paths
   ğŸ“‹ Total paths before filtering: 5
   â›” Filtered out 3 paths (ROI < 0.1%)
```

#### **æ‹†åˆ†ä¼˜åŒ–**
```rust
   ğŸ’ Applying split optimization to 2 paths...
   âœ… Split optimization complete: 2 final paths
```

#### **æ‰«æç»“æœ**
```rust
â±ï¸  Scan completed in 21.5ms
ğŸ“Š Result: 2 opportunities found

ğŸ”¥ Found 2 arbitrage opportunities (event-driven):
1. [æœºä¼šè¯¦æƒ…]
2. [æœºä¼šè¯¦æƒ…]
â­ BEST OPPORTUNITY (Score: 0.85)
```

#### **æ— æœºä¼šæƒ…å†µ**
```rust
â±ï¸  Scan completed in 20.1ms
ğŸ“Š Result: 0 opportunities found

âŒ No profitable opportunities found
   Possible reasons:
   - Market is efficient (no arbitrage gaps > 0.1%)
   - Price changes too small
   - Insufficient liquidity in pools
```

---

### **3. å®šæ—¶å™¨æ¨¡å¼æ—¥å¿—å¢å¼º**

```rust
â° Timer-Based Router initialized (fallback mode):
   Mode: Complete
   Min ROI: 0.1%
   Max hops: 6
   Split optimization: true
   Scan interval: 5 seconds
   Algorithms: Bellman-Ford + Dynamic Programming + Quick Scan

â° Timer-based scan #1 triggered
ğŸ” Starting arbitrage scan...
   Initial amount: $1000
   Min ROI: 0.1%
   Router mode: Complete
   
[... ç›¸åŒçš„è¯¦ç»†æ‰«ææ—¥å¿— ...]

â±ï¸  Scan completed in 22.3ms
ğŸ“Š Result: 0 opportunities found

âŒ No profitable opportunities found
   Possible reasons:
   - Market is efficient (no arbitrage gaps > 0.1%)
   - Price changes too small
   - Insufficient liquidity in pools
```

---

### **4. Fastæ¨¡å¼ç‰¹æ®Šæ—¥å¿—**

```rust
   ğŸš€ Fast scan mode: 2-3 hop only
   âš¡ Found 12 paths in 3.2ms
   â›” Filtered out 10 paths (ROI < 0.1%)
   ğŸ’ Applying split optimization...
```

---

## ğŸ“Š **æ—¥å¿—çº§åˆ«è¯´æ˜**

| å›¾æ ‡ | å«ä¹‰ | ç±»å‹ |
|------|------|------|
| ğŸ¯ | è§¦å‘äº‹ä»¶ | é‡è¦ |
| ğŸ” | å¼€å§‹æ‰«æ | é‡è¦ |
| â±ï¸ | æ€§èƒ½è®¡æ—¶ | é‡è¦ |
| ğŸ“Š | ç»Ÿè®¡ä¿¡æ¯ | é‡è¦ |
| âœ… | æˆåŠŸæ“ä½œ | ä¿¡æ¯ |
| âŒ | å¤±è´¥/æ— ç»“æœ | è­¦å‘Š |
| âš¡ | å¿«é€Ÿæ“ä½œ | ä¿¡æ¯ |
| ğŸ”„ | å¤„ç†ä¸­ | ä¿¡æ¯ |
| â›” | è¿‡æ»¤/é˜»æ­¢ | ä¿¡æ¯ |
| ğŸ’ | ä¼˜åŒ–æ“ä½œ | ä¿¡æ¯ |
| ğŸ”¥ | å‘ç°æœºä¼š | æˆåŠŸ |
| â­ | æœ€ä½³æœºä¼š | æˆåŠŸ |
| â­ï¸ | è·³è¿‡ | è°ƒè¯• |
| â¸ï¸ | æš‚åœ/é™åˆ¶ | è­¦å‘Š |

---

## ğŸ” **è¯Šæ–­èƒ½åŠ›æå‡**

### **ç°åœ¨å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°**ï¼š

1. **äº‹ä»¶é©±åŠ¨æ˜¯å¦å·¥ä½œ**
   - ä»·æ ¼æ›´æ–°äº‹ä»¶æ•°é‡
   - è§¦å‘é˜ˆå€¼æ˜¯å¦åˆç†
   - é˜²æŠ–æ˜¯å¦ç”Ÿæ•ˆ

2. **æ‰«æé¢‘ç‡**
   - äº‹ä»¶é©±åŠ¨ï¼šæ¯æ¬¡æ˜¾è‘—ä»·æ ¼å˜åŒ–
   - å®šæ—¶å™¨ï¼šæ¯5ç§’ï¼ˆå¸¦è®¡æ•°å™¨ï¼‰

3. **ç®—æ³•æ€§èƒ½**
   - Quick scanè€—æ—¶
   - Bellman-Fordè€—æ—¶
   - æ€»æ‰«æè€—æ—¶

4. **è·¯å¾„å‘ç°**
   - æ¯ä¸ªç®—æ³•æ‰¾åˆ°å¤šå°‘è·¯å¾„
   - å»é‡å»æ‰å¤šå°‘
   - è¿‡æ»¤æ‰å¤šå°‘ï¼ˆROIä¸è¶³ï¼‰

5. **ä¸ºä»€ä¹ˆæ²¡æœ‰æœºä¼š**
   - æ•°æ®é—®é¢˜ï¼ˆæ— æ–°é²œä»·æ ¼ï¼‰
   - ç®—æ³•é—®é¢˜ï¼ˆæ‰¾ä¸åˆ°è·¯å¾„ï¼‰
   - é˜ˆå€¼é—®é¢˜ï¼ˆè¿‡æ»¤æ‰äº†æ‰€æœ‰è·¯å¾„ï¼‰

---

## ğŸ¯ **ä½¿ç”¨æ–¹æ³•**

### **æ­£å¸¸è¿è¡Œ**
```bash
cd rust-pool-cache
cargo run --release
```

### **æŸ¥çœ‹è¾“å‡ºæ¨¡å¼**

#### **å¦‚æœçœ‹åˆ°**ï¼š
```
ğŸ¯ Event-Driven Router initialized:
   Mode: Complete
   Debounce: 100ms
   Trigger threshold: 0.5%
```
âœ… **äº‹ä»¶é©±åŠ¨æ¨¡å¼è¿è¡Œä¸­**

#### **å¦‚æœçœ‹åˆ°**ï¼š
```
â° Timer-Based Router initialized (fallback mode):
   Scan interval: 5 seconds
```
âš ï¸ **å®šæ—¶å™¨æ¨¡å¼è¿è¡Œä¸­ï¼ˆé…ç½®é—®é¢˜ï¼‰**

---

## ğŸ“‹ **å…¸å‹æ—¥å¿—åˆ†æåœºæ™¯**

### **åœºæ™¯1ï¼šäº‹ä»¶é©±åŠ¨æ­£å¸¸å·¥ä½œ**
```
ğŸ“Š Price update stats: 100 total events, 95 filtered, 5 scans triggered

ğŸ¯ Significant price change detected:
   Pool: SOL/USDC
   Change: 0.65% (threshold: 0.5%)
   âœ… Triggering arbitrage scan #5

ğŸ” Starting arbitrage scan...
   ğŸ“¡ Fetching price data...
   âœ… Using consistent snapshot with 27 pools
   ğŸš€ Starting parallel scan...
   âš¡ Quick scan: 3 paths in 2.1ms
   ğŸ” Bellman-Ford: 1 paths in 19.2ms
   
â±ï¸  Scan completed in 21.5ms
ğŸ“Š Result: 0 opportunities found

âŒ No profitable opportunities found
```

**åˆ†æ**ï¼š
- âœ… äº‹ä»¶é©±åŠ¨å·¥ä½œæ­£å¸¸
- âœ… è§¦å‘é˜ˆå€¼åˆç†ï¼ˆ95%è¢«è¿‡æ»¤ï¼‰
- âœ… æ‰«æé€Ÿåº¦æ­£å¸¸ï¼ˆ21.5msï¼‰
- âš ï¸ å¸‚åœºæ•ˆç‡é«˜ï¼Œ0.1% ROIæ— æœºä¼š

**å»ºè®®**ï¼šä¸´æ—¶é™ä½ROIé˜ˆå€¼åˆ°0.01%æµ‹è¯•

---

### **åœºæ™¯2ï¼šæ— äº‹ä»¶è§¦å‘**
```
â° Timer-Based Router initialized (fallback mode):
â° Timer-based scan #1 triggered
ğŸ“Š Result: 0 opportunities found
â° Timer-based scan #2 triggered
ğŸ“Š Result: 0 opportunities found
```

**åˆ†æ**ï¼š
- âŒ äº‹ä»¶é©±åŠ¨æ¨¡å¼æœªå¯ç”¨
- âš ï¸ é…ç½®æ–‡ä»¶å¯èƒ½æœªç”Ÿæ•ˆ

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥config.toml
grep -A 5 "event_driven" config.toml

# ç¡®ä¿ï¼š
[router.event_driven]
enabled = true
```

---

### **åœºæ™¯3ï¼šæ‰¾åˆ°äº†è·¯å¾„ä½†è¢«è¿‡æ»¤**
```
ğŸ” Starting arbitrage scan...
   âš¡ Quick scan: 8 paths in 2.3ms
   ğŸ” Bellman-Ford: 4 paths in 18.1ms
   ğŸ“‹ Total paths before filtering: 12
   â›” Filtered out 12 paths (ROI < 0.1%)
   
ğŸ“Š Result: 0 opportunities found
```

**åˆ†æ**ï¼š
- âœ… ç®—æ³•æ‰¾åˆ°äº†å¥—åˆ©æœºä¼š
- âŒ æ‰€æœ‰æœºä¼šçš„ROI < 0.1%
- âš ï¸ é˜ˆå€¼å¯èƒ½å¤ªé«˜

**è§£å†³**ï¼šé™ä½ROIé˜ˆå€¼

---

### **åœºæ™¯4ï¼šæ•°æ®è´¨é‡é—®é¢˜**
```
ğŸ” Starting arbitrage scan...
   ğŸ“¡ Fetching price data...
   âš ï¸  Consistent snapshot too small (3), falling back to fresh prices
   âŒ No fresh prices available!
   
ğŸ“Š Result: 0 opportunities found
```

**åˆ†æ**ï¼š
- âŒ WebSocketæ•°æ®æ”¶é›†æœ‰é—®é¢˜
- âŒ ä»·æ ¼ç¼“å­˜ä¸ºç©º

**è§£å†³**ï¼š
1. æ£€æŸ¥WebSocketè¿æ¥
2. æ£€æŸ¥Helius RPCçŠ¶æ€
3. æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

---

## ğŸš€ **ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®**

### **å¦‚æœçœ‹åˆ°è¿™ç§æƒ…å†µ**ï¼š
```
ğŸ“Š Price update stats: 500 total events, 498 filtered, 2 scans triggered
```

**è¯´æ˜**ï¼šè§¦å‘é˜ˆå€¼0.5%å¤ªé«˜äº†

**ä¼˜åŒ–**ï¼š
```toml
[router.event_driven]
price_change_threshold_percent = 0.1  # ä»0.5é™åˆ°0.1
```

---

### **å¦‚æœçœ‹åˆ°è¿™ç§æƒ…å†µ**ï¼š
```
   â›” Filtered out 25 paths (ROI < 0.1%)
```

**è¯´æ˜**ï¼šæœ‰å¾ˆå¤šå°æœºä¼šï¼Œä½†é˜ˆå€¼å¤ªé«˜

**æµ‹è¯•**ï¼š
```toml
[router]
min_roi_percent = 0.01  # ä¸´æ—¶é™ä½åˆ°0.01%æµ‹è¯•
```

---

### **å¦‚æœçœ‹åˆ°è¿™ç§æƒ…å†µ**ï¼š
```
   â¸ï¸  Scan skipped: max concurrent scans reached (3)
```

**è¯´æ˜**ï¼šæ‰«æå¤ªé¢‘ç¹ï¼Œéœ€è¦å¢åŠ å¹¶å‘æˆ–å¢åŠ é˜²æŠ–

**ä¼˜åŒ–**ï¼š
```toml
[router.event_driven]
max_concurrent_scans = 5  # å¢åŠ å¹¶å‘æ•°
debounce_ms = 200  # æˆ–å¢åŠ é˜²æŠ–æ—¶é—´
```

---

## âœ… **å®æ–½æ€»ç»“**

| æŒ‡æ ‡ | ä¹‹å‰ | ç°åœ¨ |
|------|------|------|
| **å¯è§æ€§** | âŒ é»‘ç›’ | âœ… å®Œå…¨é€æ˜ |
| **æ‰«ææ—¥å¿—** | âŒ ä»…æˆåŠŸ | âœ… æˆåŠŸ+å¤±è´¥ |
| **æ€§èƒ½åˆ†æ** | âŒ æ—  | âœ… è¯¦ç»†è®¡æ—¶ |
| **é—®é¢˜è¯Šæ–­** | âŒ å›°éš¾ | âœ… ç®€å• |
| **åŸå› åˆ†æ** | âŒ çŒœæµ‹ | âœ… æ˜ç¡® |
| **é…ç½®éªŒè¯** | âŒ ä¸çŸ¥é“ | âœ… æ¸…æ¥šæ˜¾ç¤º |

---

## ğŸ“ **ä½¿ç”¨æç¤º**

1. **é¦–æ¬¡è¿è¡Œ**ï¼šè§‚å¯Ÿå¯åŠ¨æ—¥å¿—ï¼Œç¡®è®¤æ¨¡å¼
2. **è§‚å¯Ÿ5åˆ†é’Ÿ**ï¼šçœ‹æ˜¯å¦æœ‰æ‰«æè§¦å‘
3. **åˆ†æç»“æœ**ï¼šæ ¹æ®æ—¥å¿—åˆ¤æ–­é—®é¢˜
4. **è°ƒæ•´é…ç½®**ï¼šæ ¹æ®åˆ†æç»“æœä¼˜åŒ–
5. **é‡å¤æµ‹è¯•**ï¼šéªŒè¯ä¼˜åŒ–æ•ˆæœ

**ç°åœ¨ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å®Œå…¨å¯è§†åŒ–ï¼** ğŸ‰






